<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Delegates in C++ | unrealcode.net</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Looking at how the Unreal Engine uses delegates">
    
    <link rel="preload" href="/assets/css/0.styles.8a4ca9a4.css" as="style"><link rel="preload" href="/assets/js/app.71a6f90d.js" as="script"><link rel="preload" href="/assets/js/3.5e27fb36.js" as="script"><link rel="preload" href="/assets/js/2.32bfe7ad.js" as="script"><link rel="preload" href="/assets/js/19.e76e149b.js" as="script"><link rel="prefetch" href="/assets/js/10.49e97280.js"><link rel="prefetch" href="/assets/js/11.f46ed50f.js"><link rel="prefetch" href="/assets/js/12.e19512ce.js"><link rel="prefetch" href="/assets/js/13.75239821.js"><link rel="prefetch" href="/assets/js/14.3551c386.js"><link rel="prefetch" href="/assets/js/15.8fbca2bd.js"><link rel="prefetch" href="/assets/js/16.a2ab5271.js"><link rel="prefetch" href="/assets/js/17.1859e4e8.js"><link rel="prefetch" href="/assets/js/18.4e9fd744.js"><link rel="prefetch" href="/assets/js/20.c6481421.js"><link rel="prefetch" href="/assets/js/21.205482a4.js"><link rel="prefetch" href="/assets/js/22.281de799.js"><link rel="prefetch" href="/assets/js/23.2108b5d6.js"><link rel="prefetch" href="/assets/js/24.f5bbc596.js"><link rel="prefetch" href="/assets/js/25.e229f812.js"><link rel="prefetch" href="/assets/js/26.dbfdf801.js"><link rel="prefetch" href="/assets/js/27.8a8857a2.js"><link rel="prefetch" href="/assets/js/28.6406c2e9.js"><link rel="prefetch" href="/assets/js/29.74ec962e.js"><link rel="prefetch" href="/assets/js/30.4959af00.js"><link rel="prefetch" href="/assets/js/31.ade7e85b.js"><link rel="prefetch" href="/assets/js/32.50702354.js"><link rel="prefetch" href="/assets/js/33.ccbdc7fc.js"><link rel="prefetch" href="/assets/js/34.38f30b74.js"><link rel="prefetch" href="/assets/js/35.a48378f3.js"><link rel="prefetch" href="/assets/js/36.c0bb8ad2.js"><link rel="prefetch" href="/assets/js/37.013efee0.js"><link rel="prefetch" href="/assets/js/38.f9519cd0.js"><link rel="prefetch" href="/assets/js/4.b728e6f4.js"><link rel="prefetch" href="/assets/js/5.eedc6100.js"><link rel="prefetch" href="/assets/js/6.5aa171c8.js"><link rel="prefetch" href="/assets/js/7.592d144b.js"><link rel="prefetch" href="/assets/js/8.675e70c4.js"><link rel="prefetch" href="/assets/js/9.876839a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a4ca9a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">unrealcode.net</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Delegates in C++</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/content/Delegates.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/content/Delegates.html#delegate-parameters-and-payload-data" class="sidebar-link">Delegate parameters and payload data</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#binding" class="sidebar-link">Binding</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#type-conversion" class="sidebar-link">Type conversion</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#dynamic-delegates" class="sidebar-link">Dynamic Delegates</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#multi-cast-delegates" class="sidebar-link">Multi-cast delegates</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#delegates-and-blueprints" class="sidebar-link">Delegates and Blueprints</a></li><li class="sidebar-sub-header"><a href="/content/Delegates.html#binding-delegates-in-constructors" class="sidebar-link">Binding Delegates in Constructors</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>Delegates in C++</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>A delegate is a object which can be used to call:</p> <ul><li>a specific method on a specific object</li> <li>a static function</li></ul> <p>A delegate type is declared like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">DECLARE_DELEGATE</span><span class="token punctuation">(</span> DelegateType <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This creates the delegate type (not the actual delegate) and that type is then used to create the delegate like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>DelegateType TheDelegate<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>There are many macros like <code>DECLARE_DELEGATE</code> and <code>DECLARE_DELEGATE_OneParam</code> used to create different types of delegates with
different parameters.  See the references at the end of this page for more details.</p> <h3 id="delegate-parameters-and-payload-data"><a href="#delegate-parameters-and-payload-data" class="header-anchor">#</a> Delegate parameters and payload data</h3> <p><em>There is a difference between the number of parameters the bound method takes and the number
of parameters which are passed when invoking the delegate</em></p> <p>The delegate declaration macros such as <code>DECLARE_DELEGATE_OneParam</code>, <code>DECLARE_DELEGATE_TwoParams</code> etc.
refer to the number and type of parameters <em>passed when invoking the delegate</em>, not
the number of parameters the bound method actually takes.</p> <p>For example we can define a method which takes two parameters and
then say we want the delegate to be invoked with only one parameter, like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">FExample</span>
<span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token function">Method</span><span class="token punctuation">(</span> <span class="token keyword">float</span> F1<span class="token punctuation">,</span> <span class="token keyword">float</span> F2 <span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">DECLARE_DELEGATE_OneParam</span><span class="token punctuation">(</span> DelegateType<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
DelegateType TheDelegate<span class="token punctuation">;</span>
TSharedRef Example <span class="token operator">=</span> <span class="token generic-function"><span class="token function">MakeShared</span><span class="token generic class-name"><span class="token operator">&lt;</span>FExample<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TheDelegate<span class="token punctuation">.</span><span class="token function">BindSP</span><span class="token punctuation">(</span> Example<span class="token punctuation">,</span> <span class="token operator">&amp;</span>FExample<span class="token double-colon punctuation">::</span>Method<span class="token punctuation">,</span> <span class="token number">2.0f</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
TheDelegate<span class="token punctuation">.</span><span class="token function">ExecuteIfBound</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>While the delegate is invoked with one parameter the method will actually
be called with two parameters: the one passed to the <code>ExecuteIfBound()</code> function
and the one passed to the <code>BindSP()</code> function.  The parameters passed to the <code>BindSP()</code> method
are refered to as <em>payload</em> parameters:</p> <ul><li>payload parameters are passed to the bound method <em>after</em> the parameters from <code>ExecuteIfBound()</code></li> <li>payload parameters are specified when the delegate is bound, not when it is invoked, so
they are like values captured by a lambda in that they are carried around by the delegate</li></ul> <h3 id="binding"><a href="#binding" class="header-anchor">#</a> Binding</h3> <p>When an delegate is created it is <em>unbound</em>, that is to say it does not refer to any method.</p> <p>Once it has been created it can be bound to a specific function or a method on a specific object.  The bind call might:</p> <ul><li>pass the address of a global function (BindStatic)</li> <li>pass a raw c++ pointer to the specific object (BindRaw)</li> <li>pass a lambda (BindLambda)</li> <li>create a weak reference to the specific object (BindSP, BindUObject)</li></ul> <p>Typically a delegate is created, then bound, and then invoked at a later time, by calling
<code>Execute()</code> or <code>ExecuteIfBound()</code>:</p> <ul><li>invoking a delegate which references a static function will always work</li> <li>invoking a delegate which references a raw c++ pointer can crash the program if the object
that the delegate references has been deleted between the time the delegate was bound and when
it was invoked</li> <li>invoking a delegate which uses a weak pointer will not crash if referenced object
has been deleted, it just won't do anything</li></ul> <h3 id="type-conversion"><a href="#type-conversion" class="header-anchor">#</a> Type conversion</h3> <p>The parameters passed to the bind functions must match the types
use by the bound method exactly.  For example this code will fail
to compile:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">struct</span> <span class="token class-name">FExample</span>
<span class="token punctuation">{</span>
	<span class="token keyword">void</span> <span class="token function">Method</span><span class="token punctuation">(</span> <span class="token keyword">float</span> F1<span class="token punctuation">,</span> <span class="token keyword">float</span> F2 <span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">DECLARE_DELEGATE_OneParam</span><span class="token punctuation">(</span> DelegateType<span class="token punctuation">,</span> <span class="token keyword">float</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
DelegateType TheDelegate<span class="token punctuation">;</span>
TSharedRef Example <span class="token operator">=</span> <span class="token generic-function"><span class="token function">MakeShared</span><span class="token generic class-name"><span class="token operator">&lt;</span>FExample<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
TheDelegate<span class="token punctuation">.</span><span class="token function">BindSP</span><span class="token punctuation">(</span> Example<span class="token punctuation">,</span> <span class="token operator">&amp;</span>FExample<span class="token double-colon punctuation">::</span>Method<span class="token punctuation">,</span> <span class="token number">2.0</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>and results in some hard to decipher error messages:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>error C2665<span class="token operator">:</span> 'TDelegate<span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FDefaultDelegateUserPolicy<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>BindSP<span class="token number">'</span><span class="token operator">:</span> none of the <span class="token number">2</span> overloads could convert all the argument types
note<span class="token operator">:</span> could be '<span class="token keyword">void</span> TDelegate<span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FDefaultDelegateUserPolicy<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">BindSP</span><span class="token generic class-name"><span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">const</span> TSharedRef<span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token operator">&gt;</span> <span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span>'
note<span class="token operator">:</span> <span class="token operator">or</span>       '<span class="token keyword">void</span> TDelegate<span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FDefaultDelegateUserPolicy<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">BindSP</span><span class="token generic class-name"><span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">const</span> TSharedRef<span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token operator">&gt;</span> <span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span>'
note<span class="token operator">:</span> '<span class="token keyword">void</span> TDelegate<span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FDefaultDelegateUserPolicy<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">BindSP</span><span class="token generic class-name"><span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">const</span> TSharedRef<span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token operator">&gt;</span> <span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span>'<span class="token operator">:</span> cannot convert argument <span class="token number">2</span> from '<span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token char">' to '</span><span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">double</span><span class="token punctuation">)</span>'
note<span class="token operator">:</span> Types pointed to are unrelated<span class="token punctuation">;</span> conversion <span class="token keyword">requires</span> <span class="token keyword">reinterpret_cast</span><span class="token punctuation">,</span> C<span class="token operator">-</span>style cast <span class="token operator">or</span> parenthesized function<span class="token operator">-</span>style cast
note<span class="token operator">:</span> see declaration of 'TDelegate<span class="token operator">&lt;</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FDefaultDelegateUserPolicy<span class="token operator">&gt;</span><span class="token double-colon punctuation">::</span>BindSP<span class="token number">'</span>
note<span class="token operator">:</span> <span class="token keyword">while</span> trying to match the argument list '<span class="token punctuation">(</span>TSharedRef<span class="token operator">&lt;</span>FExample<span class="token punctuation">,</span>ESPMode<span class="token double-colon punctuation">::</span>ThreadSafe<span class="token operator">&gt;</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span>__cdecl FExample<span class="token double-colon punctuation">::</span><span class="token operator">*</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">,</span><span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">double</span><span class="token punctuation">)</span>'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>all because the value 2.0 passed to the <code>BindSP()</code> method is a double whereas the bound method takes a float. The
usual implicit type conversion which allows a C++ function which takes a double to be called with a float does not
happen when calling a delegate.  Changing the double to a float (i.e 2.0 to 2.0f) will fix this.</p> <h3 id="dynamic-delegates"><a href="#dynamic-delegates" class="header-anchor">#</a> Dynamic Delegates</h3> <p>Dynamic delegates bind to a specific object by its address but bind the method to be
called by the name of that method instead of the address.  These are not used
much in Lyra but are used in the engine to bind
inputs, for example to bind a particular keystroke to a
named method on the input component like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FInputAxisKeyBinding <span class="token function">AB</span><span class="token punctuation">(</span> Binding<span class="token punctuation">.</span>AxisKey <span class="token punctuation">)</span><span class="token punctuation">;</span>
AB<span class="token punctuation">.</span>bConsumeInput <span class="token operator">=</span> Binding<span class="token punctuation">.</span>bConsumeInput<span class="token punctuation">;</span>
AB<span class="token punctuation">.</span>bExecuteWhenPaused <span class="token operator">=</span> Binding<span class="token punctuation">.</span>bExecuteWhenPaused<span class="token punctuation">;</span>
AB<span class="token punctuation">.</span>AxisDelegate<span class="token punctuation">.</span><span class="token function">BindDelegate</span><span class="token punctuation">(</span>ObjectToBindTo<span class="token punctuation">,</span> Binding<span class="token punctuation">.</span>FunctionNameToBind<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Dynamic delegates are slower than normal delegates because when the delegate is invoked it must interact
with the reflection system to find the method by its name. They are also serializable so when they
are used in a blueprint they get save with that blueprint.</p> <h3 id="multi-cast-delegates"><a href="#multi-cast-delegates" class="header-anchor">#</a> Multi-cast delegates</h3> <p>A normal delegate can have only one function bound to it at a time.  A multi-cast delegate can have more than one function bound to it,
so when the delegate is invoked all the functions bound to it are called, one after the other.</p> <p>The delegate type is declared using some variation of <code>DECLARE_MULTICAST_DELEGATE</code>.</p> <p>Individual functions are bound one at a time
using methods which start with &quot;Add&quot;, like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">DECLARE_MULTICAST_DELEGATE_TwoParams</span><span class="token punctuation">(</span>FCommonSession_FindSessionsFinished<span class="token punctuation">,</span> <span class="token keyword">bool</span> bSucceeded<span class="token punctuation">,</span> <span class="token keyword">const</span> FText<span class="token operator">&amp;</span> ErrorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
FCommonSession_FindSessionsFinished OnSearchFinished<span class="token punctuation">;</span>
QuickPlayRequest<span class="token operator">-&gt;</span>OnSearchFinished<span class="token punctuation">.</span><span class="token function">AddUObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>UCommonSessionSubsystem<span class="token double-colon punctuation">::</span>HandleQuickPlaySearchFinished<span class="token punctuation">,</span> 
    JoiningOrHostingPlayerPtr<span class="token punctuation">,</span> HostRequestPtr<span class="token punctuation">)</span><span class="token punctuation">;</span>
OnSearchFinished<span class="token punctuation">.</span><span class="token function">Broadcast</span><span class="token punctuation">(</span>bSucceeded<span class="token punctuation">,</span> ErrorMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Similarly to binding a normal delegate, there exist variations to bind
different type of functions:</p> <ul><li><code>AddSP()</code> binds member function and retains a weak pointer to the containing object</li> <li><code>AddThreadSafeSP()</code> binds member function and retains a weak pointer to the containing object</li> <li><code>AddUObject()</code> binds a member function and retains a raw pointer to the containing object</li></ul> <p>Instead of calling <code>Delegate.ExecuteIfBound()</code> you call <code>Delegate.Broadcast()</code> to
invoke all the functions bound to the delegate.  The bound functions
are called in the reverse order in which they were added.</p> <h3 id="delegates-and-blueprints"><a href="#delegates-and-blueprints" class="header-anchor">#</a> Delegates and Blueprints</h3> <p>Given a delegate type declared like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span><span class="token punctuation">(</span> FDelegateType<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>in a class header file we can declare a variable of that type and make it accessible from blueprints like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">UPROPERTY</span><span class="token punctuation">(</span>BlueprintAssignable<span class="token punctuation">,</span> Category<span class="token operator">=</span><span class="token string">&quot;Example Delegates&quot;</span><span class="token punctuation">)</span>
FDelegateType OnSomethingInterestingHappening<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Note that the declaration is somewhat different to other definitons:</p> <ul><li>it must be a dynamic multicast delegate</li> <li>the variable names must be listed in the delegate not just the types; in the above C++ code
the delegate parameter is called &quot;value&quot; and is of type float.</li> <li>the name of the delegate type must start with 'F'</li></ul> <p>If we add these lines to LyraCharacter.h</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">DECLARE_DYNAMIC_MULTICAST_DELEGATE_OneParam</span><span class="token punctuation">(</span> FDelegateType<span class="token punctuation">,</span> <span class="token keyword">float</span><span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>BlueprintAssignable<span class="token punctuation">,</span> Category<span class="token operator">=</span><span class="token string">&quot;Example Delegates&quot;</span><span class="token punctuation">)</span>
FDelegateType OnSomethingInterestingHappening<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>then we can edit the blueprint /Game/Characters/Character_Default, click on the &quot;Character_Default&quot; top level component
and see the new delegate in the list of possible events:</p> <p><img src="/images/lyra_03_001.png" alt=""></p> <p>We can click the '+' button to have Unreal add an event node to the event graph, including the float parameter called &quot;value&quot;:</p> <p><img src="/images/lyra_03_003.png" alt=""></p> <h3 id="binding-delegates-in-constructors"><a href="#binding-delegates-in-constructors" class="header-anchor">#</a> Binding Delegates in Constructors</h3> <p>Don't do this.  If you bind delegates in the constructor they become part of the class default
object and, at least historically, have cause problems when interacting with blueprints.  Bind them in
<code>BeginPlay()</code> instead.</p> <h4 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h4> <p><a href="https://docs.unrealengine.com/5.0/en-US/delegates-and-lamba-functions-in-unreal-engine/" target="_blank" rel="noopener noreferrer">Epic Delegates<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <footer class="f"><div><p>MIT Licensed | Copyright © 2020-2023 John Farrow</p></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.71a6f90d.js" defer></script><script src="/assets/js/3.5e27fb36.js" defer></script><script src="/assets/js/2.32bfe7ad.js" defer></script><script src="/assets/js/19.e76e149b.js" defer></script>
  </body>
</html>
