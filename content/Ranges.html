<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using C++20 with Unreal | unrealcode.net</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Notes on using C++20 features with Unreal Engine">
    
    <link rel="preload" href="/assets/css/0.styles.06a2c7d8.css" as="style"><link rel="preload" href="/assets/js/app.1a1bcabe.js" as="script"><link rel="preload" href="/assets/js/3.5e27fb36.js" as="script"><link rel="preload" href="/assets/js/2.32bfe7ad.js" as="script"><link rel="preload" href="/assets/js/32.81861962.js" as="script"><link rel="prefetch" href="/assets/js/10.49e97280.js"><link rel="prefetch" href="/assets/js/11.6e4ef963.js"><link rel="prefetch" href="/assets/js/12.0d1be04c.js"><link rel="prefetch" href="/assets/js/13.f0527924.js"><link rel="prefetch" href="/assets/js/14.511875d3.js"><link rel="prefetch" href="/assets/js/15.8fbca2bd.js"><link rel="prefetch" href="/assets/js/16.ccc64059.js"><link rel="prefetch" href="/assets/js/17.555bef63.js"><link rel="prefetch" href="/assets/js/18.954adcd7.js"><link rel="prefetch" href="/assets/js/19.c4ba1c17.js"><link rel="prefetch" href="/assets/js/20.86f91cee.js"><link rel="prefetch" href="/assets/js/21.d649793e.js"><link rel="prefetch" href="/assets/js/22.78da9d4f.js"><link rel="prefetch" href="/assets/js/23.69d54750.js"><link rel="prefetch" href="/assets/js/24.f5bbc596.js"><link rel="prefetch" href="/assets/js/25.7973a587.js"><link rel="prefetch" href="/assets/js/26.ae6327cd.js"><link rel="prefetch" href="/assets/js/27.e0d36fa0.js"><link rel="prefetch" href="/assets/js/28.c1e7ad63.js"><link rel="prefetch" href="/assets/js/29.4f4d6c3f.js"><link rel="prefetch" href="/assets/js/30.2578dbe5.js"><link rel="prefetch" href="/assets/js/31.cf2d3386.js"><link rel="prefetch" href="/assets/js/33.7fa418e0.js"><link rel="prefetch" href="/assets/js/34.b9c56611.js"><link rel="prefetch" href="/assets/js/35.290c21b9.js"><link rel="prefetch" href="/assets/js/36.3e48a375.js"><link rel="prefetch" href="/assets/js/37.4e5efe63.js"><link rel="prefetch" href="/assets/js/38.13b5b283.js"><link rel="prefetch" href="/assets/js/39.6d3c0f3d.js"><link rel="prefetch" href="/assets/js/4.b728e6f4.js"><link rel="prefetch" href="/assets/js/40.22519dd8.js"><link rel="prefetch" href="/assets/js/41.09218c23.js"><link rel="prefetch" href="/assets/js/5.fbe4e9e0.js"><link rel="prefetch" href="/assets/js/6.5aa171c8.js"><link rel="prefetch" href="/assets/js/7.592d144b.js"><link rel="prefetch" href="/assets/js/8.675e70c4.js"><link rel="prefetch" href="/assets/js/9.876839a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.06a2c7d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">unrealcode.net</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Using C++20 with Unreal</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/content/Ranges.html#using-c-20" class="sidebar-link">Using C++20</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/Ranges.html#project-configuration" class="sidebar-link">Project Configuration</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/Ranges.html#subobjects" class="sidebar-link">Subobjects</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/Ranges.html#ranges" class="sidebar-link">Ranges</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/Ranges.html#structured-bindings" class="sidebar-link">Structured Bindings</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/Ranges.html#idioms" class="sidebar-link">Idioms</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/content/Ranges.html#anonymous-enums" class="sidebar-link">Anonymous Enums</a></li></ul></li><li><a href="/content/Ranges.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>Using C++20 with Unreal</h1> <p>Updated for Unreal Engine 5.1.1</p> <h2 id="using-c-20"><a href="#using-c-20" class="header-anchor">#</a> Using C++20</h2> <p>These code here is developed and tested using Visual Studio 2022 setup as described <a href="/content/BuildFromSource.html">here</a></p> <h2 id="project-configuration"><a href="#project-configuration" class="header-anchor">#</a> Project Configuration</h2> <p>As at April 2023 Unreal Engine is configured to use c++17 by default.</p> <p>To configure a project to use c++20 add this line to the Project.build.cs</p> <div class="language-cs line-numbers-mode"><pre class="language-cs"><code>CppStandard <span class="token operator">=</span> CppStandardVersion<span class="token punctuation">.</span>Cpp20<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="subobjects"><a href="#subobjects" class="header-anchor">#</a> Subobjects</h2> <p>The USubobjectDataSubsystem class has methods for finding the
components which make up a blueprint. We will use this as a example.  The stages of getting from a blueprint
to a specific component (whether by type or name) are:</p> <ul><li>the USubobjectDataSubsystem gives us a list of FSubobjectDataHandle data handles</li> <li>from the FSubobjectDataHandle data handles we can get a list of FSubobjectData data items</li> <li>from the FSubobjectData data items we can get a list of UObject pointers (each of which is a component)</li> <li>then we can filter the UObject pointers to get the type we want</li></ul> <p>The process of getting from the list of FSubobjectDataHandle data handles to
a smaller list of components looks like this in python, using nested list comprehensions:</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>components <span class="token operator">=</span> 
    <span class="token punctuation">[</span> comp <span class="token keyword">for</span> comp <span class="token keyword">in</span> 
		<span class="token punctuation">[</span> library<span class="token punctuation">.</span>get_object<span class="token punctuation">(</span>subobject<span class="token punctuation">)</span> <span class="token keyword">for</span> subobject <span class="token keyword">in</span> 
			<span class="token punctuation">[</span> subsystem<span class="token punctuation">.</span>k2_find_subobject_data_from_handle<span class="token punctuation">(</span>handle<span class="token punctuation">)</span> <span class="token keyword">for</span> handle <span class="token keyword">in</span> 
					subsystem<span class="token punctuation">.</span>k2_gather_subobject_data_for_blueprint<span class="token punctuation">(</span>context<span class="token operator">=</span>blueprint<span class="token punctuation">)</span> <span class="token punctuation">]</span> 
			<span class="token punctuation">]</span>
		<span class="token keyword">if</span> comp<span class="token punctuation">.</span>get_class<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">&quot;MyActorComponent&quot;</span>
	<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="ranges"><a href="#ranges" class="header-anchor">#</a> Ranges</h2> <p>To do the same thing in c++ as the python code above does we will use the
std::ranges classes, new in c++20.</p> <p>Having included the <code>&lt;ranges&gt;</code> header file we can write this like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>UBlueprint<span class="token operator">*</span> CarBlueprint <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>UBlueprint<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span> <span class="token class-name">UEditorAssetLibrary</span><span class="token double-colon punctuation">::</span><span class="token function">LoadAsset</span>
            <span class="token punctuation">(</span><span class="token string">&quot;/Game/VehicleTemplate/Blueprints/SportsCar/SportsCar_Pawn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

TArray<span class="token operator">&lt;</span> FSubobjectDataHandle <span class="token operator">&gt;</span> SubobjectDataHandles<span class="token punctuation">;</span>

<span class="token comment">// get the subobject data handles into an unreal TArray</span>
SubobjectDataSubsystem<span class="token operator">-&gt;</span><span class="token function">K2_GatherSubobjectDataForBlueprint</span><span class="token punctuation">(</span>CarBlueprint<span class="token punctuation">,</span> SubobjectDataHandles<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// copy from the TArray to a std::vector</span>
std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span> FSubobjectDataHandle <span class="token operator">&gt;</span> <span class="token function">Handles</span><span class="token punctuation">(</span>SubobjectDataHandles<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> SubobjectDataHandles<span class="token punctuation">.</span><span class="token function">Num</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Handles<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> SubobjectDataHandles<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// create a range of USkeletalMeshComponent* from the vector of handles</span>

<span class="token keyword">auto</span> range <span class="token operator">=</span> Handles
    <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>views<span class="token double-colon punctuation">::</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>SubobjectDataSubsystem<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> FSubobjectDataHandle<span class="token operator">&amp;</span> Handle<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// handles to FSubobjectData</span>
        FSubobjectData Data<span class="token punctuation">;</span>
        SubobjectDataSubsystem<span class="token operator">-&gt;</span><span class="token function">K2_FindSubobjectDataFromHandle</span><span class="token punctuation">(</span>Handle<span class="token punctuation">,</span> Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>views<span class="token double-colon punctuation">::</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> FSubobjectData<span class="token operator">&amp;</span> Data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// FSubobjectData to UObject*</span>
        <span class="token keyword">return</span> <span class="token class-name">USubobjectDataBlueprintFunctionLibrary</span><span class="token double-colon punctuation">::</span><span class="token function">GetObject</span><span class="token punctuation">(</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>views<span class="token double-colon punctuation">::</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> UObject<span class="token operator">*</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// just return the skeletal mesh components</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span> <span class="token keyword">const</span> USkeletalMeshComponent <span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">|</span> std<span class="token double-colon punctuation">::</span>views<span class="token double-colon punctuation">::</span><span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> UObject<span class="token operator">*</span> Object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// UObject* to USkeletalMeshComponent*&amp;</span>
        <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span> <span class="token keyword">const</span> USkeletalMeshComponent <span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>Each stage of the process is either a call to <code>std::views::transform</code> which transforms an item
in the list from one type to another, or a call to <code>std::views::filter</code> which removes
items from the list if they do not match the selection criteria.</p> <p>The result of the code above is  the objects <code>range</code> on which we can
use in a loop to iterate over all the USkeletalMeshComponent like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> USkeletalMeshComponent<span class="token operator">*</span> SkelMesh <span class="token operator">:</span> range<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token function">CompareSkeletalMeshComponents</span><span class="token punctuation">(</span> SkelMesh<span class="token punctuation">,</span> OtherSkelMesh <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="structured-bindings"><a href="#structured-bindings" class="header-anchor">#</a> Structured Bindings</h2> <p>Given a C++ type such as FVector which has members X, Y, Z, structured bindings allows us to
deconstruct an FVector variable into three separate values like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FVector <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span><span class="token number">2.0f</span><span class="token punctuation">,</span><span class="token number">3.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">auto</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> v<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> Vector<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>We need to write come code to make the structured binding work.  Looking at <a href="https://en.cppreference.com/w/cpp/language/structured_binding" target="_blank" rel="noopener noreferrer">https://en.cppreference.com/w/cpp/language/structured_binding<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> we are using &quot;Case 2: binding a tuple-like type&quot;, so
we need to:</p> <ul><li>implement <code>std::tuple_size&lt;&gt;</code> to tell the compiler how many variables an FVector will be deconstructed to</li> <li>implement <code>std::tuple_element&lt;&gt;</code> to tell the compiler the type of each element of the FVector</li> <li>implement <code>get&lt;&gt;()</code> to tell the compiler how to get each element from the FVector</li></ul> <p>The FVector will be deconstructed into 3 separate varibales, so we implement <code>std::tuple_size&lt;&gt;</code> to tell the compiler how many variables a FVector will be deconstructed to like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">namespace</span> std
<span class="token punctuation">{</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">tuple_size</span><span class="token operator">&lt;</span>FVector<span class="token operator">&gt;</span> 
	<span class="token punctuation">{</span>
		<span class="token keyword">static</span> <span class="token keyword">constexpr</span> <span class="token keyword">int</span> value <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>We  implement <code>std::tuple_element&lt;&gt;</code> to tell the compiler the type of element
of the FVector like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">namespace</span> std 
<span class="token punctuation">{</span>
	<span class="token keyword">template</span><span class="token operator">&lt;</span>size_t Index<span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">tuple_element</span><span class="token operator">&lt;</span>Index<span class="token punctuation">,</span> FVector<span class="token operator">&gt;</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">using</span> type <span class="token operator">=</span> FVector<span class="token double-colon punctuation">::</span>FReal<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>We  implement <code>get&lt;&gt;()</code> which is called for index values from 0 to std::tuple_size (i.e. 3).
Note that the <code>get&lt;&gt;()</code> function does not need to be in the std namespace.  The compiler using
argument-dependent lookup; it looks for the <code>get&lt;&gt;()</code> function in the namespace
which the FVector is in. FVector is declared like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">using</span> FVector <span class="token operator">=</span> UE<span class="token double-colon punctuation">::</span>Math<span class="token double-colon punctuation">::</span>TVector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>so the compiler looks for the <code>get&lt;&gt;()</code> function in the UE::Math namespace, so we put it there:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">namespace</span> UE<span class="token double-colon punctuation">::</span>Math
<span class="token punctuation">{</span>
    <span class="token keyword">template</span><span class="token operator">&lt;</span>size_t Index<span class="token operator">&gt;</span>
    <span class="token keyword">constexpr</span> <span class="token keyword">auto</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">const</span> FVector<span class="token operator">&amp;</span> Vector<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token keyword">constexpr</span> <span class="token punctuation">(</span>Index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Vector<span class="token punctuation">.</span>X<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token keyword">constexpr</span> <span class="token punctuation">(</span>Index <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Vector<span class="token punctuation">.</span>Y<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token keyword">constexpr</span> <span class="token punctuation">(</span>Index <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Vector<span class="token punctuation">.</span>Z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Once we have the above code we can use structured binding to deconstruct an FVector variable
like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	FVector <span class="token function">Vector</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">2.0f</span><span class="token punctuation">,</span> <span class="token number">3.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">]</span> <span class="token operator">=</span> Vector<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="idioms"><a href="#idioms" class="header-anchor">#</a> Idioms</h2> <p>These are common patterns seen in the Unreal Engine source code, not necessarily
specific to C++ 20.</p> <h3 id="anonymous-enums"><a href="#anonymous-enums" class="header-anchor">#</a> Anonymous Enums</h3> <p>For example:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">TMassExternalSubsystemTraits</span><span class="token operator">&lt;</span>UMassTestGameInstanceSubsystem<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
	<span class="token keyword">enum</span>
	<span class="token punctuation">{</span>
		GameThreadOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		ThreadSafeRead <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		ThreadSafeWrite <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>This declares the three values specified in the enum without allocating any
variables.  When the compiler sees  the variable
<code>TMassExternalSubsystemTraits&lt;UMassTestGameInstanceSubsystem&gt;::GameThreadOnly</code>
it substitues the value <code>false</code>. Because no variable is allocated
it does not take any memory and the  value cannot be changed.</p> <h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p><a href="https://devblogs.microsoft.com/cppblog/documentation-for-cpp20-ranges/" target="_blank" rel="noopener noreferrer">Microsoft Ranges<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://timur.audio/how-to-make-a-container-from-a-c20-range" target="_blank" rel="noopener noreferrer">Making a Container from a C++20 Range<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://www.cppstories.com/2021/filter-cpp-containers/" target="_blank" rel="noopener noreferrer">Filtering Containers<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://en.cppreference.com/w/cpp/language/structured_binding" target="_blank" rel="noopener noreferrer">Structured Bindings<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <footer class="f"><div><p>MIT Licensed | Copyright © 2020-2023 John Farrow</p></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.1a1bcabe.js" defer></script><script src="/assets/js/3.5e27fb36.js" defer></script><script src="/assets/js/2.32bfe7ad.js" defer></script><script src="/assets/js/32.81861962.js" defer></script>
  </body>
</html>
