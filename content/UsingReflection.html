<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Reflection in Unreal Engine | unrealcode.net</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Notes on using the Unreal Engine reflection system">
    
    <link rel="preload" href="/assets/css/0.styles.8a4ca9a4.css" as="style"><link rel="preload" href="/assets/js/app.a85c9206.js" as="script"><link rel="preload" href="/assets/js/3.5e27fb36.js" as="script"><link rel="preload" href="/assets/js/2.32bfe7ad.js" as="script"><link rel="preload" href="/assets/js/35.f49ef5ff.js" as="script"><link rel="prefetch" href="/assets/js/10.49e97280.js"><link rel="prefetch" href="/assets/js/11.6e4ef963.js"><link rel="prefetch" href="/assets/js/12.0d1be04c.js"><link rel="prefetch" href="/assets/js/13.75239821.js"><link rel="prefetch" href="/assets/js/14.273b9c9e.js"><link rel="prefetch" href="/assets/js/15.8fbca2bd.js"><link rel="prefetch" href="/assets/js/16.55a6646b.js"><link rel="prefetch" href="/assets/js/17.818ba3a6.js"><link rel="prefetch" href="/assets/js/18.08b75dd9.js"><link rel="prefetch" href="/assets/js/19.92c314df.js"><link rel="prefetch" href="/assets/js/20.b27c6697.js"><link rel="prefetch" href="/assets/js/21.cd412d8a.js"><link rel="prefetch" href="/assets/js/22.cc2d5517.js"><link rel="prefetch" href="/assets/js/23.5864e050.js"><link rel="prefetch" href="/assets/js/24.f5bbc596.js"><link rel="prefetch" href="/assets/js/25.e229f812.js"><link rel="prefetch" href="/assets/js/26.d134e6f1.js"><link rel="prefetch" href="/assets/js/27.38556b30.js"><link rel="prefetch" href="/assets/js/28.10083c68.js"><link rel="prefetch" href="/assets/js/29.749c2424.js"><link rel="prefetch" href="/assets/js/30.289bdc5a.js"><link rel="prefetch" href="/assets/js/31.5d18c39e.js"><link rel="prefetch" href="/assets/js/32.f1a226c3.js"><link rel="prefetch" href="/assets/js/33.a8f87d51.js"><link rel="prefetch" href="/assets/js/34.9c635b24.js"><link rel="prefetch" href="/assets/js/36.b094eca7.js"><link rel="prefetch" href="/assets/js/37.f56a4792.js"><link rel="prefetch" href="/assets/js/4.b728e6f4.js"><link rel="prefetch" href="/assets/js/5.2f436e88.js"><link rel="prefetch" href="/assets/js/6.5aa171c8.js"><link rel="prefetch" href="/assets/js/7.592d144b.js"><link rel="prefetch" href="/assets/js/8.675e70c4.js"><link rel="prefetch" href="/assets/js/9.876839a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a4ca9a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">unrealcode.net</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Using Reflection in Unreal Engine</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/content/UsingReflection.html#background" class="sidebar-link">Background</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UsingReflection.html#creating-reflection-data" class="sidebar-link">Creating Reflection Data</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UsingReflection.html#accessing-reflection-data" class="sidebar-link">Accessing Reflection Data</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/content/UsingReflection.html#class-information" class="sidebar-link">Class Information</a></li><li class="sidebar-sub-header"><a href="/content/UsingReflection.html#reading-property-values" class="sidebar-link">Reading Property Values</a></li><li class="sidebar-sub-header"><a href="/content/UsingReflection.html#writing-property-values" class="sidebar-link">Writing Property Values</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>Using Reflection in Unreal Engine</h1> <p>Updated for Unreal Engine 5.0</p> <p>Reflection is the ability to inspect C++ classes and objects at runtime and gather information about
their data types and properties. Normally C++
does not maintain programmer-accessible information about, say, what members a struct or
class has.  Unreal Engine uses macros such as UCLASS and UPROPERTY to create information
about classes, structs, methods, properties, and to make
that information available to C++ at runtime.</p> <p>This enables a program to introspect an object and find out, for example, what properties
that object has, what the types of those properties are, and given an instance of that object,
what the values of those properties are.</p> <h2 id="background"><a href="#background" class="header-anchor">#</a> Background</h2> <p>The notes here were made in the course of
creating a plugin which checks a project configuration
against a known-good collection of configuration settings, for
example to check that all the settings required for hardware
raytracing have their correct values, and have to options to display and change
the current settings, as shown here:</p> <p><img src="/images/reflection_1.png" alt=""></p> <p>This plugin needs to:</p> <ul><li>identify Unreal Engine classes which are used for project settings</li> <li>identify properties on those classes</li> <li>retrieve the current values of those properties</li> <li>change the current values of those properties</li></ul> <p>The classes which Unreal Engine uses for project settings cannot be hard-coded
because they depend on which plugins the user has loaded; so reflection
is a good way of retrieving the required information.</p> <h2 id="creating-reflection-data"><a href="#creating-reflection-data" class="header-anchor">#</a> Creating Reflection Data</h2> <p>Unreal Engine uses macros which are embedded in the c++ class declarations to
create reflection data.</p> <p>A class defined using the UCLASS macro like the one below will have reflection data:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">UCLASS</span><span class="token punctuation">(</span>config<span class="token operator">=</span>Engine<span class="token punctuation">,</span> defaultconfig<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UWindowsTargetSettings</span> 
	<span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">UObject</span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>The UCLASS macro has many parameters which control how Unreal Engine treats the class, for
example whether it can be accessed using Blueprints.  The parameters are defined
in <a href="https://docs.unrealengine.com/5.0/en-US/gameplay-classes-in-unreal-engine/" target="_blank" rel="noopener noreferrer">https://docs.unrealengine.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  At
runtime these parameters can be retrieved from using a c++ API.</p> <p>Other c++ objects such as enum declarations, functions and properties have corresponding
macros (namely UENUM, UFUNCTION and UPROPERTY) which are used in a similar way
as the UCLASS macro.</p> <h2 id="accessing-reflection-data"><a href="#accessing-reflection-data" class="header-anchor">#</a> Accessing Reflection Data</h2> <h3 id="class-information"><a href="#class-information" class="header-anchor">#</a> Class Information</h3> <p>The entry point for reflection data is using iterators. To iterate
over the reflection data for all classes which are derived from UObject
you use this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>FThreadSafeObjectIterator <span class="token function">Itr</span><span class="token punctuation">(</span><span class="token class-name">UObject</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Itr<span class="token punctuation">;</span> <span class="token operator">++</span>Itr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	UClass<span class="token operator">*</span> Class <span class="token operator">=</span> Itr<span class="token operator">-&gt;</span><span class="token function">GetClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>To limit the search to classes which are derived from a
base class such as UDeveloperSettings you do this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>FThreadSafeObjectIterator <span class="token function">Itr</span><span class="token punctuation">(</span><span class="token class-name">UDeveloperSettings</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> Itr<span class="token punctuation">;</span> <span class="token operator">++</span>Itr<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	UClass<span class="token operator">*</span> Class <span class="token operator">=</span> Itr<span class="token operator">-&gt;</span><span class="token function">GetClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="uclass"><a href="#uclass" class="header-anchor">#</a> UClass</h4> <p>Having obtained a UClass* using an  iterator as described above, you can do various useful
things including:</p> <table><thead><tr><th style="text-align:left;">Action</th> <th style="text-align:left;">Function</th></tr></thead> <tbody><tr><td style="text-align:left;">check if the class is a blueprint or a c++ class</td> <td style="text-align:left;">Class-&gt;IsNative()</td></tr> <tr><td style="text-align:left;">retrieve the class name</td> <td style="text-align:left;">Class-&gt;GetName(ClassName)</td></tr> <tr><td style="text-align:left;">retrieve the config file where class settings are saved</td> <td style="text-align:left;">Class-&gt;ClassConfigName</td></tr> <tr><td style="text-align:left;">retrieve metadata such as the label on the UI settings screen</td> <td style="text-align:left;">Class-&gt;GetMetaDataText(&quot;DisplayName&quot;)</td></tr></tbody></table> <h4 id="properties"><a href="#properties" class="header-anchor">#</a> Properties</h4> <p>From a UClass* you can retrieve information about the properties, also using a iterator like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">for</span> <span class="token punctuation">(</span>TFieldIterator<span class="token operator">&lt;</span>FProperty<span class="token operator">&gt;</span> <span class="token function">PropIt</span><span class="token punctuation">(</span>Class<span class="token punctuation">)</span><span class="token punctuation">;</span> PropIt<span class="token punctuation">;</span> <span class="token operator">++</span>PropIt<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	FProperty<span class="token operator">*</span> Property <span class="token operator">=</span> <span class="token operator">*</span>PropIt<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Similar to dealing with a property, you can call various functions on a property:</p> <table><thead><tr><th style="text-align:left;">Action</th> <th style="text-align:left;">Function</th></tr></thead> <tbody><tr><td style="text-align:left;">retrieve the property name</td> <td style="text-align:left;">Property-&gt;GetName()</td></tr> <tr><td style="text-align:left;">retrieve metadata such as the label on the UI settings screen</td> <td style="text-align:left;">Property-&gt;GetMetaDataText(&quot;DisplayName&quot;)</td></tr></tbody></table> <p>You can retrieve elements of the UPROPERTY declaration. For example given this property
declaration:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token function">UPROPERTY</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> Shadows<span class="token punctuation">,</span> meta <span class="token operator">=</span> <span class="token punctuation">(</span>
    ConsoleVariable <span class="token operator">=</span> <span class="token string">&quot;r.Shadow.Virtual.Enable&quot;</span><span class="token punctuation">,</span> 
    DisplayName <span class="token operator">=</span> <span class="token string">&quot;Shadow Map Method&quot;</span><span class="token punctuation">,</span>
    ToolTip <span class="token operator">=</span> <span class="token string">&quot;Select the primary shadow mapping method.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    TEnumAsByte<span class="token operator">&lt;</span>EShadowMapMethod<span class="token double-colon punctuation">::</span>Type<span class="token operator">&gt;</span> ShadowMapMethod<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>you can test if the property is a config property declared with UPROPERTY(config) like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>EPropertyFlags Flags <span class="token operator">=</span> Property<span class="token operator">-&gt;</span>PropertyFlags<span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>Flags <span class="token operator">&amp;</span> EPropertyFlags<span class="token double-colon punctuation">::</span>CPF_Config<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>and retrieve variables from the metadata like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const FText DisplayName = Property-&gt;GetMetaDataText(&quot;DisplayName&quot;);
const FText ConsoleVariable = Property-&gt;GetMetaDataText(&quot;ConsoleVariable&quot;);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The type of a property can be retrieved by either:</p> <ul><li>calling <code>Property-&gt;GetCPPType()</code> to return the type as a string, or</li> <li>testing it by casting like so:</li></ul> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">const</span> FEnumProperty<span class="token operator">*</span> EnumProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FEnumProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Looking at the Unreal Engine source code casting seems to be the preferred way.</p> <h3 id="reading-property-values"><a href="#reading-property-values" class="header-anchor">#</a> Reading Property Values</h3> <p>The code examples above deal with the static reflection data for properties and classes.  They
do not need a specific instance of a class object to access that data, it is accessed from
static instances such as <code>UDeveloperSettings::StaticClass()</code>.</p> <p>To extract a property value from an actual instance of a class requires retrieving the
memory address where that property value is stored.  Given an instance of a class
and a property pointer retrieved as shown above, we can do this to find the
memory address where the property is stored:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FProperty<span class="token operator">*</span> Property <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
UClass<span class="token operator">*</span> Class <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> uint8<span class="token operator">*</span> PropertyAddr <span class="token operator">=</span> Property<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">ContainerPtrToValuePtr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uint8<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Class<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>we can then cast the property pointer to its derived property class and retrieve the
property value using the data address:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>FStrProperty<span class="token operator">*</span> StringProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FStrProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Value <span class="token operator">=</span> StringProperty<span class="token operator">-&gt;</span><span class="token function">GetPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Some types of property require more work, for instance numeric properties can be different
types, as shown here:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>FNumericProperty<span class="token operator">*</span> NumericProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FNumericProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>NumericProperty<span class="token operator">-&gt;</span><span class="token function">IsFloatingPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Value <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">SanitizeFloat</span><span class="token punctuation">(</span>NumericProperty<span class="token operator">-&gt;</span><span class="token function">GetFloatingPointPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>NumericProperty<span class="token operator">-&gt;</span><span class="token function">IsInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Value <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>NumericProperty<span class="token operator">-&gt;</span><span class="token function">GetSignedIntPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Enum properties have functions for getting a string representation derived
from the enum value, like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>FEnumProperty<span class="token operator">*</span> EnumProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FEnumProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    UEnum<span class="token operator">*</span> EnumDef <span class="token operator">=</span> EnumProperty<span class="token operator">-&gt;</span><span class="token function">GetEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    FNumericProperty<span class="token operator">*</span> UnderlyingProperty <span class="token operator">=</span> EnumProperty<span class="token operator">-&gt;</span><span class="token function">GetUnderlyingProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    int32 IntValue <span class="token operator">=</span> UnderlyingProperty<span class="token operator">-&gt;</span><span class="token function">GetSignedIntPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Value <span class="token operator">=</span> EnumDef<span class="token operator">-&gt;</span><span class="token function">GetAuthoredNameStringByValue</span><span class="token punctuation">(</span>IntValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>For an enum declared like this:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">EDefaultGraphicsRHI</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">uint8</span></span>
<span class="token punctuation">{</span>
    DefaultGraphicsRHI_Default <span class="token operator">=</span> <span class="token number">0</span> <span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">&quot;Default&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    DefaultGraphicsRHI_DX11 <span class="token operator">=</span> <span class="token number">1</span> <span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">&quot;DirectX 11&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	DefaultGraphicsRHI_DX12 <span class="token operator">=</span> <span class="token number">2</span> <span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">&quot;DirectX 12&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	DefaultGraphicsRHI_Vulkan <span class="token operator">=</span> <span class="token number">3</span> <span class="token function">UMETA</span><span class="token punctuation">(</span>DisplayName <span class="token operator">=</span> <span class="token string">&quot;Vulkan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>with a property value of <code>EDefaultGraphicsRHI::DefaultGraphicsRHI_DX11</code> the GetSignedIntPropertyValue() call will return 1
and the GetAuthoredNameStringByValue(1) call will return the string &quot;DefaultGraphicsRHI_DX11&quot;.</p> <h3 id="writing-property-values"><a href="#writing-property-values" class="header-anchor">#</a> Writing Property Values</h3> <p>The process of writing property values is much the same as reading them, firstly we need to get the address
where the data is stored like so:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>FProperty<span class="token operator">*</span> Property <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
UClass<span class="token operator">*</span> Class <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">const</span> uint8<span class="token operator">*</span> PropertyAddr <span class="token operator">=</span> Property<span class="token operator">-&gt;</span><span class="token generic-function"><span class="token function">ContainerPtrToValuePtr</span><span class="token generic class-name"><span class="token operator">&lt;</span>uint8<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Class<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Again we cast the property pointer to see what type it is and
set the value using the address:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>FNumericProperty<span class="token operator">*</span> NumericProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FNumericProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>NumericProperty<span class="token operator">-&gt;</span><span class="token function">IsFloatingPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		NumericProperty<span class="token operator">-&gt;</span><span class="token function">SetFloatingPointPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">,</span> NewFloatValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Each type of property has different methods for setting it.  For example
setting an enum property from a string value involves calling
GetIndexByNameString() to get the int representation of that string:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>FEnumProperty<span class="token operator">*</span> EnumProperty <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CastField</span><span class="token generic class-name"><span class="token operator">&lt;</span>FEnumProperty<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>Property<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	UEnum<span class="token operator">*</span> EnumDef <span class="token operator">=</span> EnumProperty<span class="token operator">-&gt;</span><span class="token function">GetEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FNumericProperty<span class="token operator">*</span> UnderlyingNumericProperty <span class="token operator">=</span> 
       EnumProperty<span class="token operator">-&gt;</span><span class="token function">GetUnderlyingProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	int64 NewIntValue <span class="token operator">=</span> EnumDef
       <span class="token operator">-&gt;</span><span class="token function">GetIndexByNameString</span><span class="token punctuation">(</span>PushedValue<span class="token punctuation">,</span> EGetByNameFlags<span class="token double-colon punctuation">::</span>None<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>NewIntValue <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
        UnderlyingNumericProperty<span class="token operator">-&gt;</span><span class="token function">SetIntPropertyValue</span><span class="token punctuation">(</span>PropertyAddr<span class="token punctuation">,</span> NewIntValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <footer class="f"><div><p>MIT Licensed | Copyright © 2020-2023 John Farrow</p></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a85c9206.js" defer></script><script src="/assets/js/3.5e27fb36.js" defer></script><script src="/assets/js/2.32bfe7ad.js" defer></script><script src="/assets/js/35.f49ef5ff.js" defer></script>
  </body>
</html>
