
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <script type="text/javascript">
  function putEmail() {
    var domain = 'unrealcode.net';
    var user = 'john.farrow';
    element = document.getElementById('email');
    element.innerHTML = user + '@' + domain;
  }
  </script>


    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="/theme/pygments/emacs.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="/custom.css">




  


 

<meta name="author" content="John Farrow" />
<meta name="description" content="Notes on using the Unreal Engine Json classes" />
<meta name="keywords" content="unreal engine, json, c++">


  <meta property="og:site_name" content="Unreal Code"/>
  <meta property="og:title" content="Using the Unreal Engine Json classes"/>
  <meta property="og:description" content="Notes on using the Unreal Engine Json classes"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="/BasicsOfJson.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2022-06-22 17:06:00+12:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="/author/john-farrow.html">
  <meta property="article:section" content="unreal"/>
  <meta property="article:tag" content="unreal engine"/>
  <meta property="article:tag" content="json"/>
  <meta property="article:tag" content="c++"/>
  <meta property="og:image" content="">

  <title>Unreal Code &ndash; Using the Unreal Engine Json classes</title>

</head>
<body onload="putEmail();" >
  <aside>
    <div>
      <a href="/">
        <img src="/theme/img/profile.png" alt="Experiments with Unreal Engine" title="Experiments with Unreal Engine">
      </a>

      <h1>
        <a href="/">Experiments with Unreal Engine</a>
      </h1>

<p>John Farrow</p>
      <p id="email">EMAIL</p>
       <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/johnjfarrow/" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/johnjfarrow" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="/">Home</a>



    </nav>

<article class="single">
  <header>
      
    <h1 id="using-the-unreal-engine-json-classes">Using the Unreal Engine Json&nbsp;classes</h1>
    <p>
      Posted on June 22, 2022 in <a href="/category/unreal.html">unreal</a>

    </p>
  </header>


  <div>
    <p>This document describes the basics of reading and writing Json with Unreal Engine classes.  The code here
reads and writes elements explicitly rather than reading and writing entire structs at one time.  This 
is suitable for objects which are not using the <span class="caps">UCLASS</span> or <span class="caps">UOBJECT</span> macros to create reflection&nbsp;data.</p>
<h2>Necessary&nbsp;Includes</h2>
<p>Include these header&nbsp;files:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonTypes.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonWriter.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonSerializer.h&quot;</span><span class="cp"></span>
</code></pre></div>

<h2>Using constant field&nbsp;names</h2>
<p>To avoid spelling mistakes and make it easier to change Json field names, I suggest making the field names
constants like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">JConstants</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValue</span><span class="p">(</span><span class="s">&quot;array-value&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValueDisplayName</span><span class="p">(</span><span class="s">&quot;array-value-display-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValues</span><span class="p">(</span><span class="s">&quot;array-values&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">AvailableClasses</span><span class="p">(</span><span class="s">&quot;available-classes&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassConfigName</span><span class="p">(</span><span class="s">&quot;class-config-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassName</span><span class="p">(</span><span class="s">&quot;class-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassDisplayName</span><span class="p">(</span><span class="s">&quot;class-display-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ConsoleVariable</span><span class="p">(</span><span class="s">&quot;console-variable&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>It is a bit more work up front but it reduces&nbsp;errors.</p>
<h2>Creating&nbsp;Json</h2>
<p>To create Json make a Json object which will contain&nbsp;everything:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonClassObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</code></pre></div>

<p>Then you can add fields to it using SetXXX methods like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="n">JsonClassObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassName</span><span class="p">);</span><span class="w"></span>
<span class="n">JsonClassObject</span><span class="o">-&gt;</span><span class="n">SetBoolField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">RestartRequired</span><span class="p">,</span><span class="w"> </span><span class="n">bRestartRequired</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>If you need to add a list of child objects, create an array object to hold this&nbsp;list:</p>
<div class="highlight"><pre><span></span><code><span class="n">TArray</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonPropertyList</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>Then create each child object and add it to the list object, then finally add the list object
to the containing object like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonOuterObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// make new child object</span>
<span class="w">    </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ChildObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// populate the child object</span>
<span class="w">    </span><span class="n">ChildObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassConfigName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassConfigName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ChildObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassDisplayName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassDisplayName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// add the child object to the collection</span>
<span class="w">    </span><span class="n">JsonPropertyList</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonValueObject</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ChildObject</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// add the collection to the outer object which contains it</span>
<span class="n">JsonOuterObject</span><span class="o">-&gt;</span><span class="n">SetArrayField</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Properties</span><span class="p">,</span><span class="w"> </span><span class="n">JsonPropertyList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<h3>Writing Json to a&nbsp;file</h3>
<p>First you need to write the Json object to a string, then serialize that string to file like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="n">FString</span><span class="w"> </span><span class="n">OutputString</span><span class="p">;</span><span class="w"></span>
<span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">TJsonWriter</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">Writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TJsonWriterFactory</span><span class="o">&lt;&gt;::</span><span class="n">Create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">OutputString</span><span class="p">);</span><span class="w"></span>
<span class="n">FJsonSerializer</span><span class="o">::</span><span class="n">Serialize</span><span class="p">(</span><span class="n">JsonOuter</span><span class="p">,</span><span class="w"> </span><span class="n">Writer</span><span class="p">);</span><span class="w"></span>
<span class="n">FFileHelper</span><span class="o">::</span><span class="n">SaveStringToFile</span><span class="p">(</span><span class="n">OutputString</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">AvailableClassesFileName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Writer</span><span class="o">-&gt;</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>
</code></pre></div>

<h2>Reading Json from a&nbsp;file</h2>
<p>The entire Json is read from the file into a string, then that string is parsed using the
TJsonReader class, then each field and child object can be&nbsp;extracted.</p>
<p>Reading from a file into string is like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="w"> </span><span class="n">FileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResourceDirectory</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\\</span><span class="s">Index.json&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">FString</span><span class="w"> </span><span class="n">Contents</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">LoadFileToString</span><span class="p">(</span><span class="n">Contents</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">FileName</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Parsing the string into Json uses a TJsonReader and a static call on the FJsonSerializer&nbsp;class:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FullJsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">TJsonReader</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">Reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TJsonReaderFactory</span><span class="o">&lt;&gt;::</span><span class="n">Create</span><span class="p">(</span><span class="n">Contents</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">FJsonSerializer</span><span class="o">::</span><span class="n">Deserialize</span><span class="p">(</span><span class="n">Reader</span><span class="p">,</span><span class="w"> </span><span class="n">FullJsonObject</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3>Extracting fields from the&nbsp;reader</h3>
<p>The most basic approach is to test for the existence of a field and, if it exists, read it from the Json like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="n">EJson</span><span class="o">::</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Title</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetStringField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>With some templates shown below this can be simplified to one call per&nbsp;field:</p>
<div class="highlight"><pre><span></span><code><span class="n">Description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Description</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Source</span><span class="p">);</span><span class="w"></span>
<span class="n">SourceURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">SourceURL</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Version</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>The GetIfExists() function uses templates which are specialized for each data type (to save space only the FString and bool specializations are shown below).
First the <code>struct JsonEnum&lt;T&gt;</code> maps from a c++ data type such as FString to the corresponding EJson enumeration&nbsp;EJson::String.</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="p">;</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">EJson</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EJson</span><span class="o">::</span><span class="n">String</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">EJson</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EJson</span><span class="o">::</span><span class="n">Boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

<p>Then the <code>struct Extractor&lt;T&gt;</code> maps from a c++ data type such as FString to the corresponding GetXXX() call on the
FJsonObject like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="p">;</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">FString</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetStringField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">                    </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetBoolField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

<p>And finally the <code>GetIfExists()</code> function uses the two above&nbsp;templates:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="n">T</span><span class="w"> </span><span class="n">GetIfExists</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">              </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="w"> </span><span class="n">JsonEnum</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Type</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Extractor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{}(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">T</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3>Reading arrays of child&nbsp;objects</h3>
<p>When the Json object has a child array of other objects, this can be accessed using the GetArrayField&nbsp;method:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="n">EJson</span><span class="o">::</span><span class="n">Array</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Settings</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">Settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">            </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetArrayField</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Settings</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Settings</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Setting</span><span class="o">-&gt;</span><span class="n">AsObject</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Object</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPresetSetting</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PresetSetting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FPresetSetting</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">ClassConfigName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassConfig</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">ClassDisplayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassDisplay</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">PropertyDisplayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">DisplayName</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">...</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/unreal-engine.html">unreal engine</a>
      <a href="/tag/json.html">json</a>
      <a href="/tag/c.html">c++</a>
    </p>
  </div>






</article>

    <footer>
<p>
  &copy; 2022  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses//4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses//4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l//4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Unreal Code ",
  "url" : "",
  "image": "",
  "description": ""
}
</script>

  
</body>
</html>