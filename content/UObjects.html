<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>UObjects, Generated Classes, and Class Default Objects (CDOs) | unrealcode.net</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="How parts of Unreal Engine UObjects and Blueprints fit together">
    
    <link rel="preload" href="/assets/css/0.styles.8a4ca9a4.css" as="style"><link rel="preload" href="/assets/js/app.71a6f90d.js" as="script"><link rel="preload" href="/assets/js/3.5e27fb36.js" as="script"><link rel="preload" href="/assets/js/2.32bfe7ad.js" as="script"><link rel="preload" href="/assets/js/34.38f30b74.js" as="script"><link rel="prefetch" href="/assets/js/10.49e97280.js"><link rel="prefetch" href="/assets/js/11.f46ed50f.js"><link rel="prefetch" href="/assets/js/12.e19512ce.js"><link rel="prefetch" href="/assets/js/13.75239821.js"><link rel="prefetch" href="/assets/js/14.3551c386.js"><link rel="prefetch" href="/assets/js/15.8fbca2bd.js"><link rel="prefetch" href="/assets/js/16.a2ab5271.js"><link rel="prefetch" href="/assets/js/17.1859e4e8.js"><link rel="prefetch" href="/assets/js/18.4e9fd744.js"><link rel="prefetch" href="/assets/js/19.e76e149b.js"><link rel="prefetch" href="/assets/js/20.c6481421.js"><link rel="prefetch" href="/assets/js/21.205482a4.js"><link rel="prefetch" href="/assets/js/22.281de799.js"><link rel="prefetch" href="/assets/js/23.2108b5d6.js"><link rel="prefetch" href="/assets/js/24.f5bbc596.js"><link rel="prefetch" href="/assets/js/25.e229f812.js"><link rel="prefetch" href="/assets/js/26.dbfdf801.js"><link rel="prefetch" href="/assets/js/27.8a8857a2.js"><link rel="prefetch" href="/assets/js/28.6406c2e9.js"><link rel="prefetch" href="/assets/js/29.74ec962e.js"><link rel="prefetch" href="/assets/js/30.4959af00.js"><link rel="prefetch" href="/assets/js/31.ade7e85b.js"><link rel="prefetch" href="/assets/js/32.50702354.js"><link rel="prefetch" href="/assets/js/33.ccbdc7fc.js"><link rel="prefetch" href="/assets/js/35.a48378f3.js"><link rel="prefetch" href="/assets/js/36.c0bb8ad2.js"><link rel="prefetch" href="/assets/js/37.013efee0.js"><link rel="prefetch" href="/assets/js/38.f9519cd0.js"><link rel="prefetch" href="/assets/js/4.b728e6f4.js"><link rel="prefetch" href="/assets/js/5.eedc6100.js"><link rel="prefetch" href="/assets/js/6.5aa171c8.js"><link rel="prefetch" href="/assets/js/7.592d144b.js"><link rel="prefetch" href="/assets/js/8.675e70c4.js"><link rel="prefetch" href="/assets/js/9.876839a1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8a4ca9a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">unrealcode.net</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>UObjects, Generated Classes, and Class Default Objects (CDOs)</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/content/UObjects.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UObjects.html#class-default-objects-cdos" class="sidebar-link">Class Default Objects (CDOs)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UObjects.html#static-classes" class="sidebar-link">Static Classes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UObjects.html#generated-classes" class="sidebar-link">Generated Classes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UObjects.html#default-values-of-blueprint-components" class="sidebar-link">Default values of Blueprint Components</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/content/UObjects.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1>UObjects, Generated Classes, and Class Default Objects (CDOs)</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>This post documents how a UObject functions in Unreal Engine
and how the classes generated by the Unreal Header Tool (UHT) work.</p> <p>If we create a new game project and add a c++ class which derives from ActorComponent
we get this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UCLASS( ClassGroup=(Custom), meta=(BlueprintSpawnableComponent) )
class UOBJECTS_API UMyActorComponent : public UActorComponent
{
	GENERATED_BODY()

public:	
	// Sets default values for this component's properties
	UMyActorComponent();

protected:
	// Called when the game starts
	virtual void BeginPlay() override;

public:	
	// Called every frame
	virtual void TickComponent(float DeltaTime, ELevelTick TickType, 
		FActorComponentTickFunction* ThisTickFunction) override;
};
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>The UCLASS and GENERATED_BODY() macros are used by the Unreal header tool to generate additional code which
supports reflection, serialization etc. and most importantly supports using the class
in the Unreal Editor.  It also support using the class from python, which we will
do below in the interest of making the examples shorter.</p> <p>We add a member variable and use the UPROPERTY macro like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UPROPERTY(EditAnywhere, BlueprintReadWrite)
int32 Age = 20;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Now we can access the Age property in two ways, directly, or using the SetEditorProperty method:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// c++
UMyActorComponent* Component = NewObject&lt;UMyActorComponent&gt;();
Component-&gt;Age = 13;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>or</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># python 
component = unreal.MyActorComponent();
component.age = 13;
component.set_editor_property(&quot;Age&quot;,13);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Using set_editor_property is the preferred way because it interacts with the
property system, sending on-property-changed events and flagging the object has dirty and needing saving.</p> <h2 id="class-default-objects-cdos"><a href="#class-default-objects-cdos" class="header-anchor">#</a> Class Default Objects (CDOs)</h2> <p>A class default object is an instance of a class which is created and owned by Unreal
and which holds the default values for the classes properties.  The class default object
is generated when the engine starts and is sometimes recreated, for example
if the class is a blueprint, it is recreated whenever the blueprint is recompiled.</p> <p>The fact that the class default object is generated as part of engine initialization is important.  It means
that, in your object's constructor, you should not access the Engine, which might not be completely initialized, or
the World, which might not exist, or other object which also might not have been
initialized yet.  These kind of accesses are better left to other post-initialization
stages such as BeginPlay().</p> <p>For a non-blueprint class the values stored in the properties of  the class default object
are set by the constructor of that class.  For a blueprint class the values
stored in the properties of the class default object are read from the blueprint .uasset file.</p> <p>The class default object can be used when creating
a new object - after calling the object constructor
the values from the class default object can be copied directly into the new object.</p> <p>The class default object is accessed in various ways.</p> <p>In c++ you can do this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UMyActorComponent* CDO = GetMutableDefault&lt;UMyActorComponent&gt;();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>or</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UMyActorComponent* CDO = 
     Cast&lt;UMyActorComponent&gt;( UMyActorComponent::StaticClass()-&gt;GetDefaultObject() );
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>or</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UMyActorComponent* CDO = 
    UMyActorComponent::StaticClass()-&gt;GetDefaultObject&lt;UMyActorComponent&gt;();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>and in python you can do this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>component = unreal.MyActorComponent();
cdo = component.get_default_object()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>or</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cdo = unreal.MyActorComponent.get_default_object()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="static-classes"><a href="#static-classes" class="header-anchor">#</a> Static Classes</h2> <p>When the Unreal header tool processes UMyActorComponent.h it generates
code for a UClass structure specific to  the  UMyActorComponent class.</p> <p>This instance of UClass contains data used in the
reflection system including data about each function
and property of the class.</p> <p>The static class is accessed in c++ like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UClass* MyClass = UMyActorComponent::StaticClass();
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and in python:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>my_class = unreal.MyActorComponent.static_class()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The static class can be used to retrieve reflection information,
for example the class name:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>print(unreal.MyActorComponent().static_class().get_full_name())
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>Class /Script/UObjects.MyActorComponent</p></blockquote> <h2 id="generated-classes"><a href="#generated-classes" class="header-anchor">#</a> Generated Classes</h2> <p>This section applies only to blueprints.</p> <p>If we create a new blueprint derived from the Actor class, and then add a MyActorComponent component
to it, the &quot;age&quot; property of that component will have the default value of 20 which we set
in the MyActorComponent constructor in c++ and which is now in the MyActorComponent class default object.</p> <p>If we open the new blueprint in the Unreal editor and change the value of &quot;age&quot; to
25 and save the blueprint, 25 is now that default value of age which will be used
when any instance of the blueprint is created (for example by dropping it on the world map).</p> <p>In python we can load the blueprint asset like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>bp =  unreal.EditorAssetSubsystem().load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The variable <code>bp</code> now holds an object of type unreal.Blueprint - note that
the blueprint has a different type than the object is will create; the blueprint is an unreal.Blueprint, not
an unreal.Actor which is the type of thing which the blueprint can create.</p> <p>Like the MyActorComponent class, a bluepint has a static class:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>static = unreal.EditorAssetSubsystem().load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;).static_class()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>and a class default object</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cdo = unreal.EditorAssetSubsystem()
   .load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;).get_default_object()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Note that <code>unreal.EditorAssetSubsystem().load_asset</code> returns a reference to the loaded
asset.  If the asset is already in memory it will immediately return its address, not load it again, so there is only one instance of that loaded asset returned, so this works:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>asset1 = unreal.EditorAssetSubsystem().load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;)
asset2 = unreal.EditorAssetSubsystem().load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;)
assert( asset1 is asset2 )
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Blueprints also have an associated generated class.  This can be retrieved like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gen = unreal.EditorAssetSubsystem()
   .load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;).generated_class()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>The generated class is of type BlueprintGeneratedClass. Alternatively the BlueprintGeneratedClass can be loaded directly like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gen = unreal.EditorAssetSubsystem()
   .load_blueprint_class(&quot;/Game/Blueprints/NewBlueprint.NewBlueprint&quot;)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>You can do things with the
BlueprintGeneratedClass such as spawn an actor into the level like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gen = unreal.EditorAssetSubsystem()
   .load_blueprint_class(&quot;/Game/Blueprints/NewBlueprint.NewBlueprint&quot;)
assert isinstance(gen, unreal.BlueprintGeneratedClass )
location = unreal.Vector(0, 0, 0)
rotation = unreal.Rotator()
unreal.EditorLevelLibrary
   .spawn_actor_from_class(actor_class=gen, location=location, rotation=rotation)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="default-values-of-blueprint-components"><a href="#default-values-of-blueprint-components" class="header-anchor">#</a> Default values of Blueprint Components</h2> <p>From a blueprint you can find its components and then find their class default objects, to get default values
and reflection information about each component which makes up the blueprint.</p> <p>For example we created a new blueprint &quot;/Game/Blueprint/NewBlueprint&quot; which contains
our MyActorComponent component. Now we can load the blueprint and find the MyActorComponent component like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>subsystem = unreal.get_engine_subsystem(unreal.SubobjectDataSubsystem)
blueprint = unreal.EditorAssetSubsystem().load_asset(&quot;/Game/Blueprints/NewBlueprint&quot;)
library = unreal.SubobjectDataBlueprintFunctionLibrary()

# go from subobject handles -&gt; subobjects -&gt; component objects

components = [ comp for comp in 
				[ library.get_object(subobject) for subobject in 
					[ subsystem.k2_find_subobject_data_from_handle(handle) for handle in 
						subsystem.k2_gather_subobject_data_for_blueprint(context=blueprint) ] 
					]
				if comp.get_class().get_name() == &quot;MyActorComponent&quot;
			]

# we only have one component of type &quot;MyActorComponent&quot;
assert( len(components) == 1 )

component = components[0]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>From this component we  can access two different class default objects: (1) for the original MyActorComponent class
and (2) for the blueprint component itself.  We can retrieve both of these like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># get the default value on the MyActorComponent class
print(component.get_default_object().get_editor_property(&quot;age&quot;))
&gt; 20
# get the default value on the NewBlueprint blueprint
print(component.get_editor_property(&quot;age&quot;))
&gt; 25
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="references"><a href="#references" class="header-anchor">#</a> References</h2> <p><a href="https://docs.unrealengine.com/5.1/en-US/objects-in-unreal-engine/" target="_blank" rel="noopener noreferrer">Epic Objects in Unreal Engine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://1danielcoelho.github.io/unreal-engine-basics-base-classes/" target="_blank" rel="noopener noreferrer">Base classes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://www.pythonforbeginners.com/lists/nested-list-comprehensions-in-python" target="_blank" rel="noopener noreferrer">Python nested comprehensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main> <footer class="f"><div><p>MIT Licensed | Copyright © 2020-2023 John Farrow</p></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.71a6f90d.js" defer></script><script src="/assets/js/3.5e27fb36.js" defer></script><script src="/assets/js/2.32bfe7ad.js" defer></script><script src="/assets/js/34.38f30b74.js" defer></script>
  </body>
</html>
