<!DOCTYPE html>
<html lang="english">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Unreal Engine Development Notes - category</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Unreal Engine Development Notes</a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/category.html">category</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/using-the-unreal-engine-json-classes.html">Using the Unreal Engine Json classes</a></h1>
<footer class="post-info">
        <abbr class="published" title="2022-06-24T10:27:06+12:00">
                Published: Fri 24 June 2022
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/john-farrow.html">John Farrow</a>
        </address>
<p>In <a href="/category/category.html">category</a>.</p>
<p>tags: <a href="/tag/unreal-engine.html">[&#34;unreal engine&#34;</a> <a href="/tag/json.html">&#34;json&#34;</a> <a href="/tag/c.html">&#34;c++&#34;]</a> </p>
</footer><!-- /.post-info --><p>This document describes the basics of reading and writing Json with Unreal Engine classes.  The code here
reads and writes elements explicitly rather than reading and writing entire structs at one time.  This 
is suitable for objects which are not using the UCLASS or UOBJECT macros to create reflection data.</p>
<h2>Necessary Includes</h2>
<p>Include these header files:</p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonTypes.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonWriter.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Serialization/JsonSerializer.h&quot;</span><span class="cp"></span>
</code></pre></div>

<h2>Using constant field names</h2>
<p>To avoid spelling mistakes and make it easier to change Json field names, I suggest making the field names
constants like so:</p>
<div class="highlight"><pre><span></span><code><span class="k">namespace</span><span class="w"> </span><span class="nn">JConstants</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValue</span><span class="p">(</span><span class="s">&quot;array-value&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValueDisplayName</span><span class="p">(</span><span class="s">&quot;array-value-display-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ArrayValues</span><span class="p">(</span><span class="s">&quot;array-values&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">AvailableClasses</span><span class="p">(</span><span class="s">&quot;available-classes&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassConfigName</span><span class="p">(</span><span class="s">&quot;class-config-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassName</span><span class="p">(</span><span class="s">&quot;class-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ClassDisplayName</span><span class="p">(</span><span class="s">&quot;class-display-name&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">ConsoleVariable</span><span class="p">(</span><span class="s">&quot;console-variable&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>It is a bit more work up front but it reduces errors.</p>
<h2>Creating Json</h2>
<p>To create Json make a Json object which will contain everything:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonClassObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
</code></pre></div>

<p>Then you can add fields to it using SetXXX methods like so:</p>
<div class="highlight"><pre><span></span><code><span class="n">JsonClassObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassName</span><span class="p">);</span><span class="w"></span>
<span class="n">JsonClassObject</span><span class="o">-&gt;</span><span class="n">SetBoolField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">RestartRequired</span><span class="p">,</span><span class="w"> </span><span class="n">bRestartRequired</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>If you need to add a list of child objects, create an array object to hold this list:</p>
<div class="highlight"><pre><span></span><code><span class="n">TArray</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonPropertyList</span><span class="p">;</span><span class="w"></span>
</code></pre></div>

<p>Then create each child object and add it to the list object, then finally add the list object
to the containing object like so:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">JsonOuterObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>

<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// make new child object</span>
<span class="w">    </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FJsonObject</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ChildObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// populate the child object</span>
<span class="w">    </span><span class="n">ChildObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassConfigName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassConfigName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ChildObject</span><span class="o">-&gt;</span><span class="n">SetStringField</span><span class="p">(</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassDisplayName</span><span class="p">,</span><span class="w"> </span><span class="n">ClassDisplayName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// add the child object to the collection</span>
<span class="w">    </span><span class="n">JsonPropertyList</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonValueObject</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ChildObject</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="c1">// add the collection to the outer object which contains it</span>
<span class="n">JsonOuterObject</span><span class="o">-&gt;</span><span class="n">SetArrayField</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Properties</span><span class="p">,</span><span class="w"> </span><span class="n">JsonPropertyList</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<h3>Writing Json to a file</h3>
<p>First you need to write the Json object to a string, then serialize that string to file like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">FString</span><span class="w"> </span><span class="n">OutputString</span><span class="p">;</span><span class="w"></span>
<span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">TJsonWriter</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">Writer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TJsonWriterFactory</span><span class="o">&lt;&gt;::</span><span class="n">Create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">OutputString</span><span class="p">);</span><span class="w"></span>
<span class="n">FJsonSerializer</span><span class="o">::</span><span class="n">Serialize</span><span class="p">(</span><span class="n">JsonOuter</span><span class="p">,</span><span class="w"> </span><span class="n">Writer</span><span class="p">);</span><span class="w"></span>
<span class="n">FFileHelper</span><span class="o">::</span><span class="n">SaveStringToFile</span><span class="p">(</span><span class="n">OutputString</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">AvailableClassesFileName</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Writer</span><span class="o">-&gt;</span><span class="n">Close</span><span class="p">();</span><span class="w"></span>
</code></pre></div>

<h2>Reading Json from a file</h2>
<p>The entire Json is read from the file into a string, then that string is parsed using the
TJsonReader class, then each field and child object can be extracted.</p>
<p>Reading from a file into string is like so:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="w"> </span><span class="n">FileName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResourceDirectory</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\\</span><span class="s">Index.json&quot;</span><span class="p">;</span><span class="w"></span>
<span class="n">FString</span><span class="w"> </span><span class="n">Contents</span><span class="p">;</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">FFileHelper</span><span class="o">::</span><span class="n">LoadFileToString</span><span class="p">(</span><span class="n">Contents</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">FileName</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>Parsing the string into Json uses a TJsonReader and a static call on the FJsonSerializer class:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">FullJsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">TJsonReader</span><span class="o">&lt;&gt;&gt;</span><span class="w"> </span><span class="n">Reader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TJsonReaderFactory</span><span class="o">&lt;&gt;::</span><span class="n">Create</span><span class="p">(</span><span class="n">Contents</span><span class="p">);</span><span class="w"></span>

<span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="n">FJsonSerializer</span><span class="o">::</span><span class="n">Deserialize</span><span class="p">(</span><span class="n">Reader</span><span class="p">,</span><span class="w"> </span><span class="n">FullJsonObject</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3>Extracting fields from the reader</h3>
<p>The most basic approach is to test for the existence of a field and, if it exists, read it from the Json like so:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="n">EJson</span><span class="o">::</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Title</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetStringField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>With some templates shown below this can be simplified to one call per field:</p>
<div class="highlight"><pre><span></span><code><span class="n">Description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Description</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Source</span><span class="p">);</span><span class="w"></span>
<span class="n">SourceURL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">SourceURL</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">Version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">Version</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>The GetIfExists() function uses templates which are specialized for each data type (to save space only the FString and bool specializations are shown below).
First the <code>struct JsonEnum&lt;T&gt;</code> maps from a c++ data type such as FString to the corresponding EJson enumeration EJson::String.</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="p">;</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">EJson</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EJson</span><span class="o">::</span><span class="n">String</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">JsonEnum</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="n">EJson</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EJson</span><span class="o">::</span><span class="n">Boolean</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

<p>Then the <code>struct Extractor&lt;T&gt;</code> maps from a c++ data type such as FString to the corresponding GetXXX() call on the
FJsonObject like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="p">;</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">FString</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">                       </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetStringField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Extractor</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="nf">operator</span><span class="p">()(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">                    </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetBoolField</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

<p>And finally the <code>GetIfExists()</code> function uses the two above templates:</p>
<div class="highlight"><pre><span></span><code><span class="k">template</span><span class="o">&lt;</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="n">T</span><span class="w"> </span><span class="n">GetIfExists</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span>
<span class="w">              </span><span class="k">const</span><span class="w"> </span><span class="n">FString</span><span class="o">&amp;</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="w"> </span><span class="n">JsonEnum</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">Type</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="n">PropertyName</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Extractor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">{}(</span><span class="n">JsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">PropertyName</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">T</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h3>Reading arrays of child objects</h3>
<p>When the Json object has a child array of other objects, this can be accessed using the GetArrayField method:</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">HasTypedField</span><span class="o">&lt;</span><span class="n">EJson</span><span class="o">::</span><span class="n">Array</span><span class="o">&gt;</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Settings</span><span class="p">))</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">TArray</span><span class="o">&lt;</span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;&gt;&amp;</span><span class="w"> </span><span class="n">Settings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">            </span><span class="n">JsonObject</span><span class="o">-&gt;</span><span class="n">GetArrayField</span><span class="p">(</span><span class="n">JConstants</span><span class="o">::</span><span class="n">Settings</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonValue</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">Setting</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Settings</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">TSharedPtr</span><span class="o">&lt;</span><span class="n">FJsonObject</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Setting</span><span class="o">-&gt;</span><span class="n">AsObject</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Object</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPresetSetting</span><span class="o">&gt;</span><span class="w"> </span><span class="n">PresetSetting</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MakeShared</span><span class="o">&lt;</span><span class="n">FPresetSetting</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">ClassConfigName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassConfig</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">ClassDisplayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">ClassDisplay</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">PropertyDisplayName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">                           </span><span class="n">GetIfExists</span><span class="o">&lt;</span><span class="n">FString</span><span class="o">&gt;</span><span class="p">(</span><span class="n">Object</span><span class="p">,</span><span class="w"> </span><span class="n">JConstants</span><span class="o">::</span><span class="n">DisplayName</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">...</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>