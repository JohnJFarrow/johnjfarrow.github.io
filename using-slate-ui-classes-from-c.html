
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />

  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/theme/stylesheet/style.min.css">

    <link id="dark-theme-style" rel="stylesheet" type="text/css"
          media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
    href="/theme/stylesheet/dark-theme.min.css">

    <link id="pygments-dark-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: dark), (prefers-color-scheme: no-preference)"
          href="/theme/pygments/monokai.min.css">
    <link id="pygments-light-theme" rel="stylesheet" type="text/css"
              media="(prefers-color-scheme: light)"
          href="/theme/pygments/emacs.min.css">



  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="/theme/font-awesome/css/solid.css">

  <link rel="stylesheet" type="text/css" href="/custom.css">




  


 

<meta name="author" content="John Farrow" />
<meta name="description" content="Notes on using the Slate UI classes in Unreal Engine 5.0" />
<meta name="keywords" content="unreal engine, slate, c++">


  <meta property="og:site_name" content="Unreal Code"/>
  <meta property="og:title" content="Using Slate UI Classes from C++"/>
  <meta property="og:description" content="Notes on using the Slate UI classes in Unreal Engine 5.0"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:url" content="/using-slate-ui-classes-from-c.html"/>
  <meta property="og:type" content="article"/>
  <meta property="article:published_time" content="2022-06-25 11:02:00+12:00"/>
  <meta property="article:modified_time" content=""/>
  <meta property="article:author" content="/author/john-farrow.html">
  <meta property="article:section" content="unreal"/>
  <meta property="article:tag" content="unreal engine"/>
  <meta property="article:tag" content="slate"/>
  <meta property="article:tag" content="c++"/>
  <meta property="og:image" content="">

  <title>Unreal Code &ndash; Using Slate UI Classes from C++</title>

</head>
<body >
  <aside>
    <div>
      <a href="/">
        <img src="/theme/img/profile.png" alt="Experiments with Unreal Engine" title="Experiments with Unreal Engine">
      </a>

      <h1>
        <a href="/">Experiments with Unreal Engine</a>
      </h1>

<p>John Farrow</p>

      <ul class="social">
          <li>
            <a  class="sc-github" href="https://github.com/johnjfarrow/" target="_blank">
              <i class="fab fa-github"></i>
            </a>
          </li>
          <li>
            <a  class="sc-linkedin" href="https://www.linkedin.com/in/johnjfarrow" target="_blank">
              <i class="fab fa-linkedin"></i>
            </a>
          </li>
      </ul>
    </div>

  </aside>
  <main>

    <nav>
      <a href="/">Home</a>



    </nav>

<article class="single">
  <header>
      
    <h1 id="using-slate-ui-classes-from-c">Using Slate <span class="caps">UI</span> Classes from&nbsp;C++</h1>
    <p>
      Posted on June 25, 2022 in <a href="/category/unreal.html">unreal</a>

    </p>
  </header>


  <div>
    <h2>Background</h2>
<p>The notes here were made in the course of 
creating a plugin which checks a project configuration
against a known-good collection of configuration settings, for 
example to check that all the settings required for hardware 
raytracing have their correct values, and have to options to display and change
the current settings, as shown&nbsp;here:</p>
<p><img alt="" src="/images/reflection_1.png"></p>
<h2>Overview</h2>
<p>Slate is a cross-platform user interface framework for creating tool and in-game <span class="caps">UI</span>.<br>
Slate is used by the default code generated when
creating a new&nbsp;plugin.</p>
<p>When creating a new plugin the generated code for the main window of the plugin looks like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SPresetBrowser</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">SCompoundWidget</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">SLATE_BEGIN_ARGS</span><span class="p">(</span><span class="n">SPresetBrowser</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">SLATE_END_ARGS</span><span class="p">()</span><span class="w"></span>

<span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">SPresetBrowser</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="cm">/** Widget constructor */</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">TArray</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPreset</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</code></pre></div>

<p>This shows two key features of Slate:
1. The use of the SLATE_BEGIN_ARGS/SLATE_END_ARGS macros to declare arguments
2. The Construct() method which is where the actual <span class="caps">UI</span> objects are&nbsp;created.</p>
<p>The code used in the examples below is based on the concept of a &#8216;preset&#8217;, which is a group
of editor properties like the ones shown in the image above. Each property
has fields which identify it such as the screen prompt in the project settings editor, and 
the target&nbsp;value.</p>
<h3>Object&nbsp;Hierarchy</h3>
<p>The data objects for this plugin are listed in the table below.  The data objects form a 
hierarchy, and so do the <span class="caps">UI</span> widgets representing each data&nbsp;object.</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Data Object</th>
<th style="text-align: left;">Details</th>
<th style="text-align: left;"><span class="caps">UI</span> Widget</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">FPresetList</td>
<td style="text-align: left;">Holds all of the data objects for the entire plugin</td>
<td style="text-align: left;">SPresetBrowser</td>
</tr>
<tr>
<td style="text-align: left;">FPreset</td>
<td style="text-align: left;">Holds all of the data for one preset, including a list of properties and their desired values</td>
<td style="text-align: left;">SPresetTile</td>
</tr>
<tr>
<td style="text-align: left;">FPresetSetting</td>
<td style="text-align: left;">Holds the data about one property such as name, type, desired value</td>
<td style="text-align: left;">SPresetSettingTile</td>
</tr>
</tbody>
</table>
<p>The data objects have a hierarchy like this:
- FPresetList
  - FPreset
    -&nbsp;FPresetSetting</p>
<p>And the corresponding <span class="caps">UI</span> widgets have a hierarchy like this:
- SPresetBrowser
  - SPresetTile
    -&nbsp;SPresetSettingTile</p>
<p>Each of the <span class="caps">UI</span> widgets is a subclass of <code>SCompoundWidget</code>, and each overrides the  Construct() method
to create its child&nbsp;widgets.</p>
<p>Each widget which has children has:
- a member which is a list of child data objects and 
- a member of type SListView which displays whatever is in the list of child data&nbsp;objects.</p>
<p>Specifically:
- the SPresetBrowser has a list of FPreset objects and an SListView<FPreset> member
- the SPresetTile has a list of FPresetSetting objects and an SListView<SPresetSettingTile> member</p>
<h3>The Construct&nbsp;method</h3>
<p>The SPresetBrowser Construct method looks like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">SPresetBrowser::Construct</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">FArguments</span><span class="o">&amp;</span><span class="w"> </span><span class="n">Args</span><span class="p">,</span><span class="w"> </span>
<span class="w">       </span><span class="k">const</span><span class="w"> </span><span class="n">TArray</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPreset</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">InPresets</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SBorder</span><span class="o">&gt;</span><span class="w"> </span><span class="n">MainContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SBorder</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">BorderImage</span><span class="p">(</span><span class="n">FAppStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">GetBrush</span><span class="p">(</span><span class="s">&quot;Brushes.Panel&quot;</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">Padding</span><span class="p">(</span><span class="mf">0.f</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">SVerticalBox</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="n">SVerticalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="n">VAlign</span><span class="p">(</span><span class="n">VAlign_Top</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">[</span><span class="w"></span>
<span class="w">                </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">PresetListWidget</span><span class="p">,</span><span class="w"> </span><span class="n">SPresetTileList</span><span class="p">,</span><span class="w"> </span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">))</span><span class="w"></span>
<span class="w">            </span><span class="p">]</span><span class="w"></span>
<span class="w">        </span><span class="p">];</span><span class="w"></span>

<span class="w">    </span><span class="n">ChildSlot</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="n">MainContent</span><span class="w"></span>
<span class="w">    </span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>This shows the basic idea of constructing a <span class="caps">UI</span> declaratively using&nbsp;c++.</p>
<h4>The SNew&nbsp;macro</h4>
<p>This creates a widget, as in SNew(SVerticalBox) and makes it available for other calls such as VAlign() as shown&nbsp;above</p>
<h4>The SAssignNew&nbsp;macro</h4>
<p>This creates a widget like SNew() does but also assigns it to a member shared pointer so it can be referenced&nbsp;later</p>
<h4>Slots</h4>
<p>Many widgets have positions for child widgets.  The positions are called slots. Slots are created and
accessed in different ways:
- Some widgets already have slots when the widget is constructed; like the SPresetBrowser itself which is created with a slot called ChildSlot which can be 
accessed as shown above.<br>
- Widgets such as SHorizontalBox and SVerticalBox (as shown above) need to have each slot added using a call
to +SHorizontalBox::Slot() or +SVerticalBox::Slot().
- some widgets have slots in specific places.  The SGridPanel uses +SGridPanel::Slot(ColNum, RowNum) to add a
child widget in a specific place in the&nbsp;grid</p>
<h4>Styles</h4>
<p>The call to BorderImage() above calls <code>FAppStyle::Get()</code> to access a style object.  Style objects contain brushes
(a rectangular area of a specific color), images, border detail and more.  Style objects enable setting values such as 
a font size or a widget color in one place (on the style) and reusing it in many places, ensuring a consistent look and feel
to the application.  Making changes to the look of an application is easier because the styles are all in one&nbsp;place.</p>
<h4>Construction&nbsp;approaches</h4>
<p>Widgets can be created and stored in variables, or created inline.  The two code samples below do the same thing, the first
stores the SVerticalBox widget in a variable and then adds it to the child slot, the second creates it in the child
slot&nbsp;directly:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">SBorder</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SNew</span><span class="p">(</span><span class="n">SVerticalBox</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="o">+</span><span class="w"> </span><span class="n">SVerticalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">VAlign</span><span class="p">(</span><span class="n">VAlign_Top</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">PresetListWidget</span><span class="p">,</span><span class="w"> </span><span class="n">SPresetTileList</span><span class="p">,</span><span class="w"> </span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="p">]</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>

<span class="n">ChildSlot</span><span class="w"></span>
<span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">Variable</span><span class="w"> </span>
<span class="p">];</span><span class="w"></span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="n">ChildSlot</span><span class="w"></span>
<span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">SNew</span><span class="p">(</span><span class="n">SVerticalBox</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="o">+</span><span class="w"> </span><span class="n">SVerticalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">VAlign</span><span class="p">(</span><span class="n">VAlign_Top</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">PresetListWidget</span><span class="p">,</span><span class="w"> </span><span class="n">SPresetTileList</span><span class="p">,</span><span class="w"> </span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">];</span><span class="w"></span>
<span class="p">];</span><span class="w"></span>
</code></pre></div>

<p>Some widgets automatically create child widgets.  The SListView widget is constructed like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="n">PresetListViewWidget</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="n">SNew</span><span class="p">(</span><span class="n">SListView</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPreset</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">SelectionMode</span><span class="p">(</span><span class="n">ESelectionMode</span><span class="o">::</span><span class="n">Single</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">ListItemsSource</span><span class="p">(</span><span class="o">&amp;</span><span class="n">PresetListItems</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">OnGenerateRow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPresetTileList</span><span class="o">::</span><span class="n">PresetListView_OnGenerateRow</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">ListViewStyle</span><span class="p">(</span><span class="n">FAppStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;SimpleListView&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>

<p>These&nbsp;lines:</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="n">ListItemsSource</span><span class="p">(</span><span class="o">&amp;</span><span class="n">PresetListItems</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">OnGenerateRow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPresetTileList</span><span class="o">::</span><span class="n">PresetListView_OnGenerateRow</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>pass the SListView a list of FPreset objects, and tell it to call PresetListView_OnGenerateRow() once for every row.
The PresetListView_OnGenerateRow() method creates and returns the widget(s) which represent one&nbsp;row:</p>
<div class="highlight"><pre><span></span><code><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">ITableRow</span><span class="o">&gt;</span><span class="w"> </span><span class="n">SPresetTileList</span><span class="o">::</span><span class="n">PresetListView_OnGenerateRow</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPreset</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Item</span><span class="p">,</span><span class="w"> </span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">STableViewBase</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">OwnerTable</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"></span>
<span class="w">        </span><span class="n">SNew</span><span class="p">(</span><span class="n">STableRow</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="n">FPreset</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">OwnerTable</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">[</span><span class="w"></span>
<span class="w">            </span><span class="n">SNew</span><span class="p">(</span><span class="n">SPresetTile</span><span class="p">,</span><span class="w"> </span><span class="n">SharedThis</span><span class="p">(</span><span class="k">this</span><span class="p">),</span><span class="w"> </span><span class="n">Item</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">];</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<h2>Buttons</h2>
<p>Buttons are implemented using the SButton class and styled using the SButtonStyle class.  This code
shows creation of a button&nbsp;widget:</p>
<div class="highlight"><pre><span></span><code><span class="k">const</span><span class="w"> </span><span class="n">FText</span><span class="w"> </span><span class="n">ApplyButtonLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LOCTEXT</span><span class="p">(</span><span class="s">&quot;WindowWidgetText&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Apply&quot;</span><span class="p">);</span><span class="w"></span>

<span class="n">SNew</span><span class="p">(</span><span class="n">SButton</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">ButtonStyle</span><span class="p">(</span><span class="w"> </span><span class="n">FEditorPresetsPluginStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;PresetTile.ApplyButtonStyle&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">HAlign</span><span class="p">(</span><span class="n">HAlign_Center</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">VAlign</span><span class="p">(</span><span class="n">VAlign_Center</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">IsEnabled_Lambda</span><span class="p">([</span><span class="k">this</span><span class="p">]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">EditorValueIsDifferent</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">bRevertable</span><span class="p">;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
<span class="p">.</span><span class="n">ContentPadding</span><span class="p">(</span><span class="n">FMargin</span><span class="p">(</span><span class="mf">4.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0f</span><span class="p">))</span><span class="w"></span>
<span class="p">.</span><span class="n">OnClicked_Raw</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPropertySettingTile</span><span class="o">::</span><span class="n">OnApplyButtonClicked</span><span class="p">)</span><span class="w"></span>
<span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">ApplyRevertButtonLabel</span><span class="p">,</span><span class="n">STextBlock</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">ApplyButtonLabel</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">Margin</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">)</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>

<p>This illustrates a number of interesting&nbsp;points:</p>
<h3>Buttons are&nbsp;Containers</h3>
<p>The SButton object draws a rectangle on the screen.  Any text on the button comes from
child widgets of the button.  This part of the above code shows the creation of
a text block which contains the text which appears on the&nbsp;button:</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">SAssignNew</span><span class="p">(</span><span class="n">ApplyRevertButtonLabel</span><span class="p">,</span><span class="n">STextBlock</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">ApplyButtonLabel</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">Margin</span><span class="p">(</span><span class="mf">2.0f</span><span class="p">)</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>

<h3>Button&nbsp;Styles</h3>
<p>The style used here is created with the code below when the plugin is initialized.  This code sets the 
color to be used by the button when the button is in various states such as Normal, Hovered Over, and Disabled.
The style is added to the StyleInstance object along with other styles and can be retrieved using the 
&#8220;PresetTile.ApplyButtonStyle&#8221;&nbsp;key.</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">FEditorPresetsPluginStyle::Initialize</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">FColor</span><span class="w"> </span><span class="n">ButtonColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FColor</span><span class="o">::</span><span class="n">Green</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="n">FButtonStyle</span><span class="w"> </span><span class="n">ApplyButtonStyle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FAppStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">().</span><span class="n">GetWidgetStyle</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FButtonStyle</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;SimpleButton&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ApplyButtonStyle</span><span class="p">.</span><span class="n">SetNormal</span><span class="p">(</span><span class="n">FSlateColorBrush</span><span class="p">(</span><span class="n">ButtonColor</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">ApplyButtonStyle</span><span class="p">.</span><span class="n">SetHovered</span><span class="p">(</span><span class="n">FSlateColorBrush</span><span class="p">(</span><span class="n">ButtonColor</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">ApplyButtonStyle</span><span class="p">.</span><span class="n">SetDisabled</span><span class="p">(</span><span class="n">FSlateColorBrush</span><span class="p">(</span><span class="n">FSlateColor</span><span class="o">::</span><span class="n">UseSubduedForeground</span><span class="p">()));</span><span class="w"></span>
<span class="w">    </span><span class="n">ApplyButtonStyle</span><span class="p">.</span><span class="n">SetNormalForeground</span><span class="p">(</span><span class="n">FStyleColors</span><span class="o">::</span><span class="n">Black</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">ApplyButtonStyle</span><span class="p">.</span><span class="n">SetHoveredForeground</span><span class="p">(</span><span class="n">FStyleColors</span><span class="o">::</span><span class="n">Black</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">StyleInstance</span><span class="o">-&gt;</span><span class="n">Set</span><span class="p">(</span><span class="s">&quot;PresetTile.ApplyButtonStyle&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ApplyButtonStyle</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>To use the style specify the static StyleInstance object for the plugin and key &#8220;PresetTile.ApplyButtonStyle&#8221; like&nbsp;so:</p>
<div class="highlight"><pre><span></span><code><span class="n">SNew</span><span class="p">(</span><span class="n">SButton</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">ButtonStyle</span><span class="p">(</span><span class="w"> </span><span class="n">FEditorPresetsPluginStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;PresetTile.ApplyButtonStyle&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<h3>Callbacks and&nbsp;Events</h3>
<p>The&nbsp;lines</p>
<div class="highlight"><pre><span></span><code><span class="n">SNew</span><span class="p">(</span><span class="n">SButton</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">IsEnabled</span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>shows the simplest way of specifying a parameter to the IsEnabled method.  Other ways exist such&nbsp;as:</p>
<p><code>IsEnabled(this, &amp;FMedia::IsAutoDetectEnabled)</code> Takes a pointer to an object and a method to be called on that object.  This version calls shared_from_this() on the object parameter to 
make a shared pointer to the object.  It will fail if that object is still being constructed because shared_from_this() cannot be called
on a partially constructed object.  This method does have the advantage that it uses a shared pointer to keep the referenced object&nbsp;alive.</p>
<p><code>IsEnabled_Raw(this, &amp;FMedia::IsAutoDetectEnabled)</code> Takes a pointer to an object and method to be called on that object.  This version takes a raw pointer and will not call shared_from_this() 
so can be called when the object has not finished&nbsp;construction.</p>
<p><code>IsEnabled_Lambda</code> Takes a lambda returning a bool, for&nbsp;example:</p>
<div class="highlight"><pre><span></span><code><span class="n">SNew</span><span class="p">(</span><span class="n">SButton</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">IsEnabled_Lambda</span><span class="p">([</span><span class="k">this</span><span class="p">]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">EditorValueIsDifferent</span><span class="p">();</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>

<p>This means the enabled state of the button can change when the data&nbsp;changes.</p>
<p><code>IsEnabled_Static(&amp;FMedia::IsNotCustomEventOverride, FunctionEntryNodePtr)</code> Takes a static function and a&nbsp;parameter</p>
<p><code>IsEnabled_UObject(Item, &amp;FMedia::GetOwnerIsEnabled)</code> Takes a pointer to a UObject and a member&nbsp;method</p>
<p><code>IsEnabled_UObject(this, &amp;FMedia::IsImportEnabled, ContextObject)</code> Takes a reference to a method and an additional UObject&nbsp;parameter|</p>
<h3>Events</h3>
<p>This code shows a callback when a button is&nbsp;clicked:</p>
<div class="highlight"><pre><span></span><code><span class="n">SNew</span><span class="p">(</span><span class="n">SButton</span><span class="p">)</span><span class="w"></span>
<span class="p">.</span><span class="n">OnClicked_Raw</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPropertySettingTile</span><span class="o">::</span><span class="n">OnApplyButtonClicked</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>Like the Callbacks section above, there are many variations of the OnClicked() method taking different&nbsp;parameters.</p>
<p>The implementation of the OnApplyButtonClicked method looks like&nbsp;this:</p>
<div class="highlight"><pre><span></span><code><span class="n">FReply</span><span class="w"> </span><span class="nf">SPropertySettingTile::OnApplyButtonClicked</span><span class="p">()</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">EditorValueWidget</span><span class="p">.</span><span class="n">IsValid</span><span class="p">())</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">EditorValueWidget</span><span class="o">-&gt;</span><span class="n">SetText</span><span class="p">(</span><span class="n">FText</span><span class="o">::</span><span class="n">FromString</span><span class="p">(</span><span class="n">PresetSetting</span><span class="o">-&gt;</span><span class="n">EditorValue</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">FReply</span><span class="o">::</span><span class="n">Handled</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>

<p>The only special detail to note is that it returns an FReply object telling the editor whether the 
click was handled or&nbsp;not.</p>
<h3>Beware of Logic&nbsp;Errors</h3>
<p>The behaviour of a specific widget sometimes depends on the widget it is contained in.
For example this code creates an SListView widget which creates one row for each 
of the ten entries in the <code>Data</code> collection:</p>
<div class="highlight"><pre><span></span><code><span class="n">SNew</span><span class="p">(</span><span class="n">SVerticalBox</span><span class="p">)</span><span class="w"></span>
<span class="o">+</span><span class="w"> </span><span class="n">SVerticalBox</span><span class="o">::</span><span class="n">Slot</span><span class="p">()</span><span class="w"></span>
<span class="p">.</span><span class="n">AutoHeight</span><span class="p">()</span><span class="w"> </span>
<span class="p">[</span><span class="w"></span>
<span class="w">    </span><span class="n">SNew</span><span class="p">(</span><span class="n">SListView</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TSharedRef</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DataClass</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">ListItemsSource</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Data</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">SelectionMode</span><span class="p">(</span><span class="n">ESelectionMode</span><span class="o">::</span><span class="n">None</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">OnGenerateRow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">SPresetBrowser</span><span class="o">::</span><span class="n">OnGenerateRow</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">.</span><span class="n">ListViewStyle</span><span class="p">(</span><span class="n">FAppStyle</span><span class="o">::</span><span class="n">Get</span><span class="p">(),</span><span class="w"> </span><span class="s">&quot;SimpleListView&quot;</span><span class="p">)</span><span class="w"></span>
<span class="p">]</span><span class="w"></span>
</code></pre></div>

<p>but the list view will display without a scrollbar. This is because there is a conflict between the way the height of the SListView is calculated
and the way the height of the containing SVerticalBox is calculated.  The SListView needs to know the height of its container so it can calculate
its own height and hence the position of the scrollbar, but because <code>.AutoHeight()</code> is specified on the SVerticalBox the
height of the vertical box is in turn calculated. It is not possible to satisfy both these&nbsp;requirements.  </p>
<h2>Widget&nbsp;Reflector</h2>
<p>This tool is found in the Unreal Editor under Tools|Debug|Widget Reflector.  It shows a windows like this:
<img alt="" src="/images/WidgetReflector_1.png"></p>
<p>To use it click the &#8220;Pick Hit-Testable Widgets&#8221;, then click on a widget in your <span class="caps">UI</span>, then hit escape.  The Widget Reflector
window will now show the hierarchy of widgets and their children like so:
<img alt="" src="/images/WidgetReflector_2.png"></p>
<p>Picking a widget in the hierarchy will highlight it in the <span class="caps">UI</span> as shown in the above image by the green box around
the selected widget.  You can also click on the &#8220;Source&#8221; column to jump to the line of code which created that&nbsp;widget.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="/tag/unreal-engine.html">unreal engine</a>
      <a href="/tag/slate.html">slate</a>
      <a href="/tag/c.html">c++</a>
    </p>
  </div>






</article>

    <footer>
<p>
  &copy; 2022  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses//4.0/deed.en_US" target="_blank">Creative Commons Attribution-ShareAlike</a>
</p>
<p>
Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme
  <span class="footer-separator">|</span>
  Switch to the <a href="javascript:void(0)" onclick="theme.switch(`dark`)">dark</a> | <a href="javascript:void(0)" onclick="theme.switch(`light`)">light</a> | <a href="javascript:void(0)" onclick="theme.switch(`browser`)">browser</a> theme
  <script id="dark-theme-script"
          src="/theme/dark-theme/dark-theme.min.js"
          data-enable-auto-detect-theme="True"
          data-default-theme="dark"
          type="text/javascript">
  </script>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses//4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="https://i.creativecommons.org/l//4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Unreal Code ",
  "url" : "",
  "image": "",
  "description": ""
}
</script>

  
</body>
</html>